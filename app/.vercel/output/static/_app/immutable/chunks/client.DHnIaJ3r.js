const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./enableLiveMode.BCh7FD3X.js","./stegaEncodeSourceMap.Dkj4zhN2.js"])))=>i.map(i=>d[i]);
import{n as $s,m as Cs}from"./index.BwpyxmsR.js";import{r as ks,o as As,C as Os}from"./scheduler.BW_PoDdS.js";import{_ as Ct}from"./preload-helper.D6kgxu3v.js";import{r as Ts,w as Nt,d as Rs}from"./index.DSSdDI7u.js";function Rc(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Pc(e,t){e.d(1),t.delete(e.key)}function xc(e,t){$s(e,1,1,()=>{t.delete(e.key)})}function Mc(e,t,r,n,i,s,o,a,c,l,u,f){let d=e.length,p=s.length,h=d;const y={};for(;h--;)y[e[h].key]=h;const m=[],v=new Map,k=new Map,S=[];for(h=p;h--;){const $=f(i,s,h),x=r($);let T=o.get(x);T?S.push(()=>T.p($,t)):(T=l(x,$),T.c()),v.set(x,m[h]=T),x in y&&k.set(x,Math.abs(h-y[x]))}const w=new Set,_=new Set;function A($){Cs($,1),$.m(a,u),o.set($.key,$),u=$.first,p--}for(;d&&p;){const $=m[p-1],x=e[d-1],T=$.key,g=x.key;$===x?(u=$.first,d--,p--):v.has(g)?!o.has(T)||w.has(T)?A($):_.has(g)?d--:k.get(T)>k.get(g)?(_.add(T),A($)):(w.add(g),d--):(c(x,o),d--)}for(;d--;){const $=e[d];v.has($.key)||c($,o)}for(;p;)A(m[p-1]);return ks(S),m}new TextEncoder;const Ps=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Qt=/_key\s*==\s*['"](.*)['"]/,xs=/^\d*:\d*$/;function Xt(e){return typeof e=="number"||typeof e=="string"&&/^\[\d+\]$/.test(e)}function kt(e){return typeof e=="string"?Qt.test(e.trim()):typeof e=="object"&&"_key"in e}function tn(e){if(typeof e=="string"&&xs.test(e))return!0;if(!Array.isArray(e)||e.length!==2)return!1;const[t,r]=e;return(typeof t=="number"||t==="")&&(typeof r=="number"||r==="")}function Ms(e,t,r){const n=typeof t=="string"?Zt(t):t;if(!Array.isArray(n))throw new Error("Path must be an array or a string");let i=e;for(let s=0;s<n.length;s++){const o=n[s];if(Xt(o)){if(!Array.isArray(i))return r;i=i[o]}if(kt(o)){if(!Array.isArray(i))return r;i=i.find(a=>a._key===o._key)}if(typeof o=="string"&&(i=typeof i=="object"&&i!==null?i[o]:void 0),typeof i>"u")return r}return i}function rn(e){if(!Array.isArray(e))throw new Error("Path is not an array");return e.reduce((t,r,n)=>{const i=typeof r;if(i==="number")return`${t}[${r}]`;if(i==="string")return`${t}${n===0?"":"."}${r}`;if(kt(r)&&r._key)return`${t}[_key=="${r._key}"]`;if(Array.isArray(r)){const[s,o]=r;return`${t}[${s}:${o}]`}throw new Error(`Unsupported path segment \`${JSON.stringify(r)}\``)},"")}function Zt(e){if(typeof e!="string")throw new Error("Path is not a string");const t=e.match(Ps);if(!t)throw new Error("Invalid path string");return t.map(Is)}function Is(e){return Xt(e)?js(e):kt(e)?Fs(e):tn(e)?Ls(e):e}function js(e){return Number(e.replace(/[^\d]/g,""))}function Fs(e){return{_key:e.match(Qt)[1]}}function Ls(e){const[t,r]=e.split(":").map(n=>n===""?n:Number(n));return[t,r]}var er=Object.freeze({__proto__:null,fromString:Zt,get:Ms,isIndexSegment:Xt,isIndexTuple:tn,isKeySegment:kt,reKeySegment:Qt,toString:rn});const zt="drafts.";function nn(e){return e.startsWith(zt)?e.slice(zt.length):e}const yr={"\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","'":"\\'","\\":"\\\\"},gr={"\\f":"\f","\\n":`
`,"\\r":"\r","\\t":"	","\\'":"'","\\\\":"\\"};function qs(e){return`$${e.map(t=>typeof t=="string"?`['${t.replace(/[\f\n\r\t'\\]/g,r=>yr[r])}']`:typeof t=="number"?`[${t}]`:t._key!==""?`[?(@._key=='${t._key.replace(/['\\]/g,r=>yr[r])}')]`:`[${t._index}]`).join("")}`}function Ds(e){const t=[],r=/\['(.*?)'\]|\[(\d+)\]|\[\?\(@\._key=='(.*?)'\)\]/g;let n;for(;(n=r.exec(e))!==null;){if(n[1]!==void 0){const i=n[1].replace(/\\(\\|f|n|r|t|')/g,s=>gr[s]);t.push(i);continue}if(n[2]!==void 0){t.push(parseInt(n[2],10));continue}if(n[3]!==void 0){const i=n[3].replace(/\\(\\')/g,s=>gr[s]);t.push({_key:i,_index:-1});continue}}return t}function sn(e){return e.map(t=>{if(typeof t=="string"||typeof t=="number")return t;if(t._key!=="")return{_key:t._key};if(t._index!==-1)return t._index;throw new Error(`invalid segment:${JSON.stringify(t)}`)})}function Us(e){return(typeof e=="string"?Zt(e):e).map(t=>{if(typeof t=="string"||typeof t=="number")return t;if(Array.isArray(t))throw new Error(`IndexTuple segments aren't supported:${JSON.stringify(t)}`);if(Ns(t))return t;if(t._key)return{_key:t._key,_index:-1};throw new Error(`invalid segment:${JSON.stringify(t)}`)})}function Ns(e){return typeof e=="object"&&"_key"in e&&"_index"in e}function zs(e){return e.map(t=>{if(typeof t=="string"||typeof t=="number")return t;if(t._index!==-1)return t._index;throw new Error(`invalid segment:${JSON.stringify(t)}`)})}function Ks(e,t){if(!(t!=null&&t.mappings))return;const r=qs(zs(e));if(t.mappings[r]!==void 0)return{mapping:t.mappings[r],matchedPath:r,pathSuffix:""};const n=Object.entries(t.mappings).filter(([a])=>r.startsWith(a)).sort(([a],[c])=>c.length-a.length);if(n.length==0)return;const[i,s]=n[0],o=r.substring(i.length);return{mapping:s,matchedPath:i,pathSuffix:o}}function Ic(e){const{baseUrl:t,workspace:r="default",tool:n="default",id:i,type:s,path:o,projectId:a,dataset:c}=e;if(!t)throw new Error("baseUrl is required");if(!o)throw new Error("path is required");if(!i)throw new Error("id is required");if(t!=="/"&&t.endsWith("/"))throw new Error("baseUrl must not end with a slash");const l=r==="default"?void 0:r,u=n==="default"?void 0:n,f=nn(i),d=Array.isArray(o)?rn(sn(o)):o,p=new URLSearchParams({baseUrl:t,id:f,type:s,path:d});l&&p.set("workspace",l),u&&p.set("tool",u),a&&p.set("projectId",a),c&&p.set("dataset",c),i.startsWith(zt)&&p.set("isDraft","");const h=[t==="/"?"":t];l&&h.push(l);const y=["mode=presentation",`id=${f}`,`type=${s}`,`path=${encodeURIComponent(d)}`];return u&&y.push(`tool=${u}`),h.push("intent","edit",`${y.join(";")}?${p}`),h.join("/")}function Ws(e){const{resultSourceMap:t,resultPath:r}=e,{mapping:n,pathSuffix:i}=Ks(r,t)||{};if(!n||n.source.type==="literal"||n.source.type==="unknown")return;const s=t.documents[n.source.document],o=t.paths[n.source.path];if(s&&o){const{baseUrl:a,workspace:c,tool:l}=Hs(typeof e.studioUrl=="function"?e.studioUrl(s):e.studioUrl);if(!a)return;const{_id:u,_type:f,_projectId:d,_dataset:p}=s;return{baseUrl:a,workspace:c,tool:l,id:u,type:f,path:Ds(o+i),projectId:d,dataset:p}}}function Hs(e){let t=typeof e=="string"?e:e.baseUrl;return t!=="/"&&(t=t.replace(/\/$/,"")),typeof e=="string"?{baseUrl:t}:{...e,baseUrl:t}}var on={},Bs={kValues:Symbol("values"),kStorage:Symbol("kStorage"),kStorages:Symbol("kStorages"),kTransfromer:Symbol("kTransformer"),kTTL:Symbol("kTTL"),kOnDedupe:Symbol("kOnDedupe"),kOnError:Symbol("kOnError"),kOnHit:Symbol("kOnHit"),kOnMiss:Symbol("kOnMiss"),kStale:Symbol("kStale")},Kt={exports:{}};(function(e,t){const{hasOwnProperty:r}=Object.prototype,n=p();n.configure=p,n.stringify=n,n.default=n,t.stringify=n,t.configure=p,e.exports=n;const i=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]|[\ud800-\udbff](?![\udc00-\udfff])|(?:[^\ud800-\udbff]|^)[\udc00-\udfff]/;function s(h){return h.length<5e3&&!i.test(h)?`"${h}"`:JSON.stringify(h)}function o(h){if(h.length>200)return h.sort();for(let y=1;y<h.length;y++){const m=h[y];let v=y;for(;v!==0&&h[v-1]>m;)h[v]=h[v-1],v--;h[v]=m}return h}const a=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Object.getPrototypeOf(new Int8Array)),Symbol.toStringTag).get;function c(h){return a.call(h)!==void 0&&h.length!==0}function l(h,y,m){h.length<m&&(m=h.length);const v=y===","?"":" ";let k=`"0":${v}${h[0]}`;for(let S=1;S<m;S++)k+=`${y}"${S}":${v}${h[S]}`;return k}function u(h,y){let m;if(r.call(h,y)&&(m=h[y],typeof m!="boolean"))throw new TypeError(`The "${y}" argument must be of type boolean`);return m===void 0||m}function f(h,y){let m;if(r.call(h,y)){if(m=h[y],typeof m!="number")throw new TypeError(`The "${y}" argument must be of type number`);if(!Number.isInteger(m))throw new TypeError(`The "${y}" argument must be an integer`);if(m<1)throw new RangeError(`The "${y}" argument must be >= 1`)}return m===void 0?1/0:m}function d(h){return h===1?"1 item":`${h} items`}function p(h){const y=function(T){if(r.call(T,"strict")){const g=T.strict;if(typeof g!="boolean")throw new TypeError('The "strict" argument must be of type boolean');if(g)return b=>{let O="Object can not safely be stringified. Received type "+typeof b;throw typeof b!="function"&&(O+=` (${b.toString()})`),new Error(O)}}}(h={...h});y&&(h.bigint===void 0&&(h.bigint=!1),"circularValue"in h||(h.circularValue=Error));const m=function(T){if(r.call(T,"circularValue")){const g=T.circularValue;if(typeof g=="string")return`"${g}"`;if(g==null)return g;if(g===Error||g===TypeError)return{toString(){throw new TypeError("Converting circular structure to JSON")}};throw new TypeError('The "circularValue" argument must be of type string or the value null or undefined')}return'"[Circular]"'}(h),v=u(h,"bigint"),k=u(h,"deterministic"),S=f(h,"maximumDepth"),w=f(h,"maximumBreadth");function _(T,g,b,O,E,R){let C=g[T];switch(typeof C=="object"&&C!==null&&typeof C.toJSON=="function"&&(C=C.toJSON(T)),C=O.call(g,T,C),typeof C){case"string":return s(C);case"object":{if(C===null)return"null";if(b.indexOf(C)!==-1)return m;let M="",j=",";const F=R;if(Array.isArray(C)){if(C.length===0)return"[]";if(S<b.length+1)return'"[Array]"';b.push(C),E!==""&&(M+=`
${R+=E}`,j=`,
${R}`);const J=Math.min(C.length,w);let ee=0;for(;ee<J-1;ee++){const pr=_(String(ee),C,b,O,E,R);M+=pr!==void 0?pr:"null",M+=j}const se=_(String(ee),C,b,O,E,R);return M+=se!==void 0?se:"null",C.length-1>w&&(M+=`${j}"... ${d(C.length-w-1)} not stringified"`),E!==""&&(M+=`
${F}`),b.pop(),`[${M}]`}let L=Object.keys(C);const W=L.length;if(W===0)return"{}";if(S<b.length+1)return'"[Object]"';let I="",B="";E!==""&&(j=`,
${R+=E}`,I=" ");const re=Math.min(W,w);k&&!c(C)&&(L=o(L)),b.push(C);for(let J=0;J<re;J++){const ee=L[J],se=_(ee,C,b,O,E,R);se!==void 0&&(M+=`${B}${s(ee)}:${I}${se}`,B=j)}return W>w&&(M+=`${B}"...":${I}"${d(W-w)} not stringified"`,B=j),E!==""&&B.length>1&&(M=`
${R}${M}
${F}`),b.pop(),`{${M}}`}case"number":return isFinite(C)?String(C):y?y(C):"null";case"boolean":return C===!0?"true":"false";case"undefined":return;case"bigint":if(v)return String(C);default:return y?y(C):void 0}}function A(T,g,b,O,E,R){switch(typeof g=="object"&&g!==null&&typeof g.toJSON=="function"&&(g=g.toJSON(T)),typeof g){case"string":return s(g);case"object":{if(g===null)return"null";if(b.indexOf(g)!==-1)return m;const C=R;let M="",j=",";if(Array.isArray(g)){if(g.length===0)return"[]";if(S<b.length+1)return'"[Array]"';b.push(g),E!==""&&(M+=`
${R+=E}`,j=`,
${R}`);const W=Math.min(g.length,w);let I=0;for(;I<W-1;I++){const re=A(String(I),g[I],b,O,E,R);M+=re!==void 0?re:"null",M+=j}const B=A(String(I),g[I],b,O,E,R);return M+=B!==void 0?B:"null",g.length-1>w&&(M+=`${j}"... ${d(g.length-w-1)} not stringified"`),E!==""&&(M+=`
${C}`),b.pop(),`[${M}]`}b.push(g);let F="";E!==""&&(j=`,
${R+=E}`,F=" ");let L="";for(const W of O){const I=A(W,g[W],b,O,E,R);I!==void 0&&(M+=`${L}${s(W)}:${F}${I}`,L=j)}return E!==""&&L.length>1&&(M=`
${R}${M}
${C}`),b.pop(),`{${M}}`}case"number":return isFinite(g)?String(g):y?y(g):"null";case"boolean":return g===!0?"true":"false";case"undefined":return;case"bigint":if(v)return String(g);default:return y?y(g):void 0}}function $(T,g,b,O,E){switch(typeof g){case"string":return s(g);case"object":{if(g===null)return"null";if(typeof g.toJSON=="function"){if(typeof(g=g.toJSON(T))!="object")return $(T,g,b,O,E);if(g===null)return"null"}if(b.indexOf(g)!==-1)return m;const R=E;if(Array.isArray(g)){if(g.length===0)return"[]";if(S<b.length+1)return'"[Array]"';b.push(g);let I=`
${E+=O}`;const B=`,
${E}`,re=Math.min(g.length,w);let J=0;for(;J<re-1;J++){const se=$(String(J),g[J],b,O,E);I+=se!==void 0?se:"null",I+=B}const ee=$(String(J),g[J],b,O,E);return I+=ee!==void 0?ee:"null",g.length-1>w&&(I+=`${B}"... ${d(g.length-w-1)} not stringified"`),I+=`
${R}`,b.pop(),`[${I}]`}let C=Object.keys(g);const M=C.length;if(M===0)return"{}";if(S<b.length+1)return'"[Object]"';const j=`,
${E+=O}`;let F="",L="",W=Math.min(M,w);c(g)&&(F+=l(g,j,w),C=C.slice(g.length),W-=g.length,L=j),k&&(C=o(C)),b.push(g);for(let I=0;I<W;I++){const B=C[I],re=$(B,g[B],b,O,E);re!==void 0&&(F+=`${L}${s(B)}: ${re}`,L=j)}return M>w&&(F+=`${L}"...": "${d(M-w)} not stringified"`,L=j),L!==""&&(F=`
${E}${F}
${R}`),b.pop(),`{${F}}`}case"number":return isFinite(g)?String(g):y?y(g):"null";case"boolean":return g===!0?"true":"false";case"undefined":return;case"bigint":if(v)return String(g);default:return y?y(g):void 0}}function x(T,g,b){switch(typeof g){case"string":return s(g);case"object":{if(g===null)return"null";if(typeof g.toJSON=="function"){if(typeof(g=g.toJSON(T))!="object")return x(T,g,b);if(g===null)return"null"}if(b.indexOf(g)!==-1)return m;let O="";if(Array.isArray(g)){if(g.length===0)return"[]";if(S<b.length+1)return'"[Array]"';b.push(g);const j=Math.min(g.length,w);let F=0;for(;F<j-1;F++){const W=x(String(F),g[F],b);O+=W!==void 0?W:"null",O+=","}const L=x(String(F),g[F],b);return O+=L!==void 0?L:"null",g.length-1>w&&(O+=`,"... ${d(g.length-w-1)} not stringified"`),b.pop(),`[${O}]`}let E=Object.keys(g);const R=E.length;if(R===0)return"{}";if(S<b.length+1)return'"[Object]"';let C="",M=Math.min(R,w);c(g)&&(O+=l(g,",",w),E=E.slice(g.length),M-=g.length,C=","),k&&(E=o(E)),b.push(g);for(let j=0;j<M;j++){const F=E[j],L=x(F,g[F],b);L!==void 0&&(O+=`${C}${s(F)}:${L}`,C=",")}return R>w&&(O+=`${C}"...":"${d(R-w)} not stringified"`),b.pop(),`{${O}}`}case"number":return isFinite(g)?String(g):y?y(g):"null";case"boolean":return g===!0?"true":"false";case"undefined":return;case"bigint":if(v)return String(g);default:return y?y(g):void 0}}return function(T,g,b){if(arguments.length>1){let O="";if(typeof b=="number"?O=" ".repeat(Math.min(b,10)):typeof b=="string"&&(O=b.slice(0,10)),g!=null){if(typeof g=="function")return _("",{"":T},[],g,O,"");if(Array.isArray(g))return A("",T,[],function(E){const R=new Set;for(const C of E)(typeof C=="string"||typeof C=="number")&&R.add(String(C));return R}(g),O,"")}if(O.length!==0)return $("",T,[],O,"")}return x("",T,[])}}})(Kt,Kt.exports);var an=Kt.exports;function mr(e){return e*Math.random()|0}var At={findNotMatching:function(e,t){const r=[];let n=0;for(let i=0;i<e.length;i++)for(let s=n;s<t.length;s++)e[i]!==t[s]&&(r.push(t[s]),n=s+1);return r},findMatchingIndexes:function(e,t){const r=[];let n=0;for(let i=0;i<e.length;i++)for(let s=n;s<t.length;s++)e[i]===t[s]&&(r.push(s),n=s+1);return r},bsearchIndex:function(e,t){let r=0,n=e.length-1;for(;r<=n;){const i=(r+n)/2|0;if(e[i]===t)return i;e[i]<t?r=i+1:n=i-1}return-1},wildcardMatch:function(e,t){if(e==="*"||e.length===t.length&&e===t)return!0;let r=0,n=0;for(;r<e.length&&n<t.length;)if(e[r]!==t[n]){if(e[r]!=="*")return!1;if(e[r+1]===t[n]){r++;continue}n++}else r++,n++;return r>=e.length-1},randomSubset:function(e,t){if(e.length<1||t<1)return[];const r=Math.min(e.length,t),n=(s=1,o=r,(s=Math.floor(s))+mr(1+(o=Math.floor(o))-s)),i=new Set;var s,o;for(let c=0;c<n;c++)i.add(mr(e.length));const a=[];for(const c of i)a.push(e[c]);return a},abstractLogging:function(){const e=()=>{};return{fatal:e,error:e,warn:e,info:e,debug:e,trace:e}},isServerSide:typeof window>"u"},vr,wr,cn=class{constructor(t){this.options=t}async get(t){throw new Error("storage get method not implemented")}async set(t,r,n,i){throw new Error("storage set method not implemented")}async remove(t){throw new Error("storage remove method not implemented")}async invalidate(t){throw new Error("storage invalidate method not implemented")}async clear(t){throw new Error("storage clear method not implemented")}async refresh(){throw new Error("storage refresh method not implemented")}};function te(e){if(typeof e!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=e}typeof Symbol<"u"&&(te.prototype[Symbol.iterator]=function(){return this}),te.of=function(){var e=arguments,t=e.length,r=0;return new te(function(){return r>=t?{done:!0}:{done:!1,value:e[r++]}})},te.empty=function(){return new te(function(){return{done:!0}})},te.fromSequence=function(e){var t=0,r=e.length;return new te(function(){return t>=r?{done:!0}:{done:!1,value:e[t++]}})},te.is=function(e){return e instanceof te||typeof e=="object"&&e!==null&&typeof e.next=="function"};var Vs=te,Wt={};Wt.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u",Wt.SYMBOL_SUPPORT=typeof Symbol<"u";var un=Wt,Js=un.ARRAY_BUFFER_SUPPORT,Gs=un.SYMBOL_SUPPORT,ln=function(e,t){var r,n,i,s,o;if(!e)throw new Error("obliterator/forEach: invalid iterable.");if(typeof t!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(e)||Js&&ArrayBuffer.isView(e)||typeof e=="string"||e.toString()==="[object Arguments]")for(i=0,s=e.length;i<s;i++)t(e[i],i);else if(typeof e.forEach!="function")if(Gs&&Symbol.iterator in e&&typeof e.next!="function"&&(e=e[Symbol.iterator]()),typeof e.next!="function")for(n in e)e.hasOwnProperty(n)&&t(e[n],n);else for(r=e,i=0;(o=r.next()).done!==!0;)t(o.value,i),i++;else e.forEach(t)},tr={};(function(e){var t=Math.pow(2,8)-1,r=Math.pow(2,16)-1,n=Math.pow(2,32)-1,i=Math.pow(2,7)-1,s=Math.pow(2,15)-1,o=Math.pow(2,31)-1;e.getPointerArray=function(c){var l=c-1;if(l<=t)return Uint8Array;if(l<=r)return Uint16Array;if(l<=n)return Uint32Array;throw new Error("mnemonist: Pointer Array of size > 4294967295 is not supported.")},e.getSignedPointerArray=function(c){var l=c-1;return l<=i?Int8Array:l<=s?Int16Array:l<=o?Int32Array:Float64Array},e.getNumberType=function(c){return c===(0|c)?Math.sign(c)===-1?c<=127&&c>=-128?Int8Array:c<=32767&&c>=-32768?Int16Array:Int32Array:c<=255?Uint8Array:c<=65535?Uint16Array:Uint32Array:Float64Array};var a={Uint8Array:1,Int8Array:2,Uint16Array:3,Int16Array:4,Uint32Array:5,Int32Array:6,Float32Array:7,Float64Array:8};e.getMinimalRepresentation=function(c,l){var u,f,d,p,h,y=null,m=0;for(p=0,h=c.length;p<h;p++)d=l?l(c[p]):c[p],f=e.getNumberType(d),(u=a[f.name])>m&&(m=u,y=f);return y},e.isTypedArray=function(c){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView(c)},e.concat=function(){var c,l,u,f=0;for(c=0,u=arguments.length;c<u;c++)f+=arguments[c].length;var d=new arguments[0].constructor(f);for(c=0,l=0;c<u;c++)d.set(arguments[c],l),l+=arguments[c].length;return d},e.indices=function(c){for(var l=new(e.getPointerArray(c))(c),u=0;u<c;u++)l[u]=u;return l}})(tr);var Ie={},br=ln,_r=tr;function xt(e){return typeof e.length=="number"?e.length:typeof e.size=="number"?e.size:void 0}Ie.isArrayLike=function(e){return Array.isArray(e)||_r.isTypedArray(e)},Ie.guessLength=xt,Ie.toArray=function(e){var t=xt(e),r=typeof t=="number"?new Array(t):[],n=0;return br(e,function(i){r[n++]=i}),r},Ie.toArrayWithIndices=function(e){var t=xt(e),r=typeof t=="number"?_r.getPointerArray(t):Array,n=typeof t=="number"?new Array(t):[],i=typeof t=="number"?new r(t):[],s=0;return br(e,function(o){n[s]=o,i[s]=s++}),[n,i]};var Mt=Vs,Ys=ln,Qs=tr,Xs=Ie;function q(e,t,r){if(arguments.length<2&&(r=e,e=null,t=null),this.capacity=r,typeof this.capacity!="number"||this.capacity<=0)throw new Error("mnemonist/lru-cache: capacity should be positive number.");if(!isFinite(this.capacity)||Math.floor(this.capacity)!==this.capacity)throw new Error("mnemonist/lru-cache: capacity should be a finite positive integer.");var n=Qs.getPointerArray(r);this.forward=new n(r),this.backward=new n(r),this.K=typeof e=="function"?new e(r):new Array(r),this.V=typeof t=="function"?new t(r):new Array(r),this.size=0,this.head=0,this.tail=0,this.items={}}q.prototype.clear=function(){this.size=0,this.head=0,this.tail=0,this.items={}},q.prototype.splayOnTop=function(e){var t=this.head;if(this.head===e)return this;var r=this.backward[e],n=this.forward[e];return this.tail===e?this.tail=r:this.backward[n]=r,this.forward[r]=n,this.backward[t]=e,this.head=e,this.forward[e]=t,this},q.prototype.set=function(e,t){var r=this.items[e];if(typeof r<"u")return this.splayOnTop(r),void(this.V[r]=t);this.size<this.capacity?r=this.size++:(r=this.tail,this.tail=this.backward[r],delete this.items[this.K[r]]),this.items[e]=r,this.K[r]=e,this.V[r]=t,this.forward[r]=this.head,this.backward[this.head]=r,this.head=r},q.prototype.setpop=function(e,t){var r=null,n=null,i=this.items[e];return typeof i<"u"?(this.splayOnTop(i),r=this.V[i],this.V[i]=t,{evicted:!1,key:e,value:r}):(this.size<this.capacity?i=this.size++:(i=this.tail,this.tail=this.backward[i],r=this.V[i],n=this.K[i],delete this.items[n]),this.items[e]=i,this.K[i]=e,this.V[i]=t,this.forward[i]=this.head,this.backward[this.head]=i,this.head=i,n?{evicted:!0,key:n,value:r}:null)},q.prototype.has=function(e){return e in this.items},q.prototype.get=function(e){var t=this.items[e];if(!(typeof t>"u"))return this.splayOnTop(t),this.V[t]},q.prototype.peek=function(e){var t=this.items[e];if(!(typeof t>"u"))return this.V[t]},q.prototype.forEach=function(e,t){t=arguments.length>1?t:this;for(var r=0,n=this.size,i=this.head,s=this.K,o=this.V,a=this.forward;r<n;)e.call(t,o[i],s[i],this),i=a[i],r++},q.prototype.keys=function(){var e=0,t=this.size,r=this.head,n=this.K,i=this.forward;return new Mt(function(){if(e>=t)return{done:!0};var s=n[r];return++e<t&&(r=i[r]),{done:!1,value:s}})},q.prototype.values=function(){var e=0,t=this.size,r=this.head,n=this.V,i=this.forward;return new Mt(function(){if(e>=t)return{done:!0};var s=n[r];return++e<t&&(r=i[r]),{done:!1,value:s}})},q.prototype.entries=function(){var e=0,t=this.size,r=this.head,n=this.K,i=this.V,s=this.forward;return new Mt(function(){if(e>=t)return{done:!0};var o=n[r],a=i[r];return++e<t&&(r=s[r]),{done:!1,value:[o,a]}})},typeof Symbol<"u"&&(q.prototype[Symbol.iterator]=q.prototype.entries),q.prototype.inspect=function(){for(var e,t=new Map,r=this.entries();!(e=r.next()).done;)t.set(e.value[0],e.value[1]);return Object.defineProperty(t,"constructor",{value:q,enumerable:!1}),t},typeof Symbol<"u"&&(q.prototype[Symbol.for("nodejs.util.inspect.custom")]=q.prototype.inspect),q.from=function(e,t,r,n){if(arguments.length<2){if(typeof(n=Xs.guessLength(e))!="number")throw new Error("mnemonist/lru-cache.from: could not guess iterable length. Please provide desired capacity as last argument.")}else arguments.length===2&&(n=t,t=null,r=null);var i=new q(t,r,n);return Ys(e,function(s,o){i.set(o,s)}),i};const Zs=q,{abstractLogging:ei}=At,ti=cn,{findMatchingIndexes:ri,findNotMatching:Er,bsearchIndex:ni,wildcardMatch:si}=At,ii=typeof globalThis.setImmediate<"u"?globalThis.setImmediate:(e,...t)=>setTimeout(e,0,...t);let je;function Ye(){if(je!==void 0)return je;je=Math.floor(Date.now()/1e3);const e=setTimeout(oi,1e3);return typeof e.unref=="function"&&e.unref(),je}function oi(){je=void 0}var ai=class extends ti{constructor(e={}){if(e.size&&(typeof e.size!="number"||e.size<1))throw new Error("size must be a positive integer greater than 0");super(e),this.size=e.size||1024,this.log=e.log||ei(),this.invalidation=e.invalidation||!1,this.init()}init(){this.store=new Zs(this.size),this.invalidation&&(this.keysReferences=new Map,this.referencesKeys=new Map)}get(e){this.log.debug({msg:"acd/storage/memory.get",key:e});const t=this.store.get(e);if(t){if(this.log.debug({msg:"acd/storage/memory.get, entry",entry:t,now:Ye()}),t.start+t.ttl>Ye())return this.log.debug({msg:"acd/storage/memory.get, key is NOT expired",key:e,entry:t}),t.value;this.log.debug({msg:"acd/storage/memory.get, key is EXPIRED",key:e,entry:t}),ii(()=>this.remove(e))}}getTTL(e){this.log.debug({msg:"acd/storage/memory.getTTL",key:e});const t=this.store.peek(e);let r=0;return t&&(r=t.start+t.ttl-Ye(),r<0&&(r=0)),r}set(e,t,r,n){if(this.log.debug({msg:"acd/storage/memory.set",key:e,value:t,ttl:r,references:n}),!(r=Number(r))||r<0)return;const i=this.store.has(e),s=this.store.setpop(e,{value:t,ttl:r,start:Ye()});if(this.log.debug({msg:"acd/storage/memory.set, evicted",removed:s}),s&&s.evicted&&(this.log.debug({msg:"acd/storage/memory.set, remove evicted key",key:s.key}),this._removeReferences([s.key])),!n||n.length<1)return;if(!this.invalidation)return void this.log.warn({msg:"acd/storage/memory.set, invalidation is disabled, references are useless"});let o;if(n=[...new Set(n)],i&&(o=this.keysReferences.get(e),this.log.debug({msg:"acd/storage/memory.set, current keys-references",key:e,references:o}),o)){o.sort(),n.sort();const c=Er(n,o);for(const l of c){const u=this.referencesKeys.get(l);if(!u)continue;const f=ni(u,e);if(!(f<0)){if(u.splice(f,1),u.length<1){this.referencesKeys.delete(l);continue}this.referencesKeys.set(l,u)}}}const a=o?Er(o,n):n;for(let c=0;c<a.length;c++){const l=a[c];let u=this.referencesKeys.get(l);u?(this.log.debug({msg:"acd/storage/memory.set, add reference-key",key:e,reference:l}),u.push(e)):u=[e],this.log.debug({msg:"acd/storage/memory.set, set reference-keys",keys:u,reference:l}),this.referencesKeys.set(l,u)}this.keysReferences.set(e,n)}remove(e){this.log.debug({msg:"acd/storage/memory.remove",key:e});const t=this._removeKey(e);return this._removeReferences([e]),t}_removeKey(e){return this.log.debug({msg:"acd/storage/memory._removeKey",key:e}),!!this.store.has(e)&&(this.store.set(e,void 0),!0)}_removeReferences(e){if(!this.invalidation)return;this.log.debug({msg:"acd/storage/memory._removeReferences",keys:e});const t=new Set;for(let r=0;r<e.length;r++){const n=e[r],i=this.keysReferences.get(n);if(i){for(let s=0;s<i.length;s++)t.add(i[s]);this.log.debug({msg:"acd/storage/memory._removeReferences, delete key-references",key:n}),this.keysReferences.delete(n)}}this._removeReferencesKeys([...t],e)}_removeReferencesKeys(e,t){t.sort(),this.log.debug({msg:"acd/storage/memory._removeReferencesKeys",references:e,keys:t});for(let r=0;r<e.length;r++){const n=e[r],i=this.referencesKeys.get(n);if(this.log.debug({msg:"acd/storage/memory._removeReferencesKeys, get reference-key",reference:n,keys:t,referencesKeys:i}),!i)continue;const s=ri(t,i);if(this.log.debug({msg:"acd/storage/memory._removeReferencesKeys, removing",reference:n,referencesToRemove:s,referencesKeys:i}),s.length!==i.length)for(let o=s.length-1;o>=0;o--)this.log.debug({msg:"acd/storage/memory._removeReferencesKeys, remove",reference:n,referencesKeys:i,at:s[o]}),i.splice(s[o],1);else this.log.debug({msg:"acd/storage/memory._removeReferencesKeys, delete",reference:n}),this.referencesKeys.delete(n)}}invalidate(e){return this.invalidation?(this.log.debug({msg:"acd/storage/memory.invalidate",references:e}),Array.isArray(e)?this._invalidateReferences(e):this._invalidateReference(e)):(this.log.warn({msg:"acd/storage/memory.invalidate, exit due invalidation is disabled"}),[])}_invalidateReferences(e){const t=[];for(let r=0;r<e.length;r++){const n=e[r],i=this.referencesKeys.get(n);if(this.log.debug({msg:"acd/storage/memory._invalidateReferences, remove keys on reference",reference:n,keys:i}),i){for(let s=0;s<i.length;s++){const o=i[s];this.log.debug({msg:"acd/storage/memory._invalidateReferences, remove key on reference",reference:n,key:o}),this._removeKey(o)&&t.push(o)}this.log.debug({msg:"acd/storage/memory._invalidateReferences, remove references of",reference:n,keys:i}),this._removeReferences([...i])}}return t}_invalidateReference(e){if(e.includes("*")){const n=[];for(const i of this.referencesKeys.keys())si(e,i)&&n.push(i);return this._invalidateReferences(n)}const t=this.referencesKeys.get(e),r=[];if(this.log.debug({msg:"acd/storage/memory._invalidateReference, remove keys on reference",reference:e,keys:t}),!t)return r;for(let n=0;n<t.length;n++){const i=t[n];this.log.debug({msg:"acd/storage/memory._invalidateReference, remove key on reference",reference:e,key:i}),this._removeKey(i)&&r.push(i)}return this.log.debug({msg:"acd/storage/memory._invalidateReference, remove references of",reference:e,keys:t}),this._removeReferences([...t]),r}clear(e){if(this.log.debug({msg:"acd/storage/memory.clear",name:e}),!e)return this.store.clear(),this.invalidation?(this.referencesKeys.clear(),void this.keysReferences.clear()):void 0;const t=[];this.store.forEach((n,i)=>{this.log.debug({msg:"acd/storage/memory.clear, iterate key",key:i}),i.indexOf(e)===0&&(this.log.debug({msg:"acd/storage/memory.clear, remove key",key:i}),t.push(i))});const r=[];for(let n=0;n<t.length;n++)this._removeKey(t[n])&&r.push(t[n]);return this._removeReferences(r),r}refresh(){this.log.debug({msg:"acd/storage/memory.refresh"}),this.init()}};const{isServerSide:fn}=At;let hn;fn&&(hn=function(){if(wr)return vr;wr=1;const e=an,t=cn,{findNotMatching:r,randomSubset:n,abstractLogging:i}=At;return vr=class extends t{constructor(s={}){if(!s.client||typeof s.client!="object")throw new Error("Redis client is required");if(super(s),s.invalidation&&s.invalidation.referencesTTL&&(typeof s.invalidation.referencesTTL!="number"||s.invalidation.referencesTTL<1))throw new Error("invalidation.referencesTTL must be a positive integer greater than 1");this.log=s.log||i(),this.store=s.client,this.invalidation=!!s.invalidation,this.referencesTTL=s.invalidation&&s.invalidation.referencesTTL||60}getReferenceKeyLabel(s){return`r:${s}`}getKeyReferenceLabel(s){return`k:${s}`}async get(s){this.log.debug({msg:"acd/storage/redis.get",key:s});try{const o=await this.store.get(s);return o?JSON.parse(o):this.invalidation?void this.clearReferences(s):void 0}catch(o){this.log.error({msg:"acd/storage/redis.get error",err:o,key:s})}}async getTTL(s){this.log.debug({msg:"acd/storage/memory.getTTL",key:s});let o=await this.store.pttl(s);return o<0?0:(o=Math.ceil(o/1e3),o)}async set(s,o,a,c){if(this.log.debug({msg:"acd/storage/redis.set key",key:s,value:o,ttl:a,references:c}),(a=Number(a))&&!(a<0))try{if(await this.store.set(s,e(o),"EX",a),!c||c.length<1)return;if(!this.invalidation)return void this.log.warn({msg:"acd/storage/redis.set, invalidation is disabled, references are useless",key:s,references:c});const l=[],u=await this.store.smembers(this.getKeyReferenceLabel(s));if(this.log.debug({msg:"acd/storage/redis.set current references",key:s,currentReferences:u}),u.length>1){u.sort(),c.sort();const p=r(c,u);for(const h of p)l.push(["srem",this.getReferenceKeyLabel(h),s]);l.push(["del",this.getKeyReferenceLabel(s)])}const f=u.length>1?r(u,c):c;this.log.debug({msg:"acd/storage/redis.set references to add",key:s,referencesToAdd:f});for(let p=0;p<f.length;p++){const h=f[p],y=this.getReferenceKeyLabel(h);l.push(["sadd",y,s]),l.push(["expire",y,this.referencesTTL])}const d=this.getKeyReferenceLabel(s);l.push(["sadd",d,c]),l.push(["expire",d,a]),this.log.debug({msg:"acd/storage/redis.set references writes",writes:l}),await this.store.pipeline(l).exec()}catch(l){this.log.error({msg:"acd/storage/redis.set error",err:l,key:s,ttl:a,references:c})}}async remove(s){this.log.debug({msg:"acd/storage/redis.remove",key:s});try{const o=await this.store.del(s)>0;return o&&this.invalidation&&await this.clearReferences(s),o}catch(o){this.log.error({msg:"acd/storage/redis.remove error",err:o,key:s})}}async invalidate(s){if(!this.invalidation)return this.log.warn({msg:"acd/storage/redis.invalidate, exit due invalidation is disabled"}),[];this.log.debug({msg:"acd/storage/redis.invalidate",references:s});try{return Array.isArray(s)?await this._invalidateReferences(s):await this._invalidateReference(s)}catch(o){return this.log.error({msg:"acd/storage/redis.invalidate error",err:o,references:s}),[]}}async _invalidateReferences(s,o=!0){const a=s.map(f=>["smembers",o?this.getReferenceKeyLabel(f):f]),c=await this.store.pipeline(a).exec();this.log.debug({msg:"acd/storage/redis._invalidateReferences keys",keys:c});const l=[],u=[];for(let f=0;f<c.length;f++){const d=c[f][1];if(d){this.log.debug({msg:"acd/storage/redis._invalidateReferences got keys to be invalidated",keys:d});for(let p=0;p<d.length;p++){const h=d[p];this.log.debug({msg:"acd/storage/redis._invalidateReferences del key"+h}),u.push(h),l.push(["del",h])}}}return await this.store.pipeline(l).exec(),await this.clearReferences(u),u}async _invalidateReference(s){let o;if(s.includes("*")){const l=await this.store.keys(this.getReferenceKeyLabel(s));return this._invalidateReferences(l,!1)}o=await this.store.smembers(this.getReferenceKeyLabel(s)),this.log.debug({msg:"acd/storage/redis._invalidateReference keys",keys:o});const a=[],c=[];for(let l=0;l<o.length;l++){const u=o[l];this.log.debug({msg:"acd/storage/redis._invalidateReference del key"+u}),c.push(u),a.push(["del",u])}return await this.store.pipeline(a).exec(),await this.clearReferences(c),c}async clear(s){this.log.debug({msg:"acd/storage/redis.clear",name:s});try{if(!s)return void await this.store.flushall();const o=await this.store.keys(`${s}*`);this.log.debug({msg:"acd/storage/redis.clear keys",keys:o});const a=o.map(c=>["del",c]);if(await this.store.pipeline(a).exec(),!this.invalidation)return;await this.clearReferences(o)}catch(o){this.log.error({msg:"acd/storage/redis.clear error",err:o,name:s})}}async refresh(){try{await this.store.flushall()}catch(s){this.log.error({msg:"acd/storage/redis.refresh error",err:s})}}async clearReferences(s){try{if(!s)return void this.log.warn({msg:"acd/storage/redis.clearReferences invalid call due to empty key"});Array.isArray(s)||(s=[s]);const o=s.map(l=>["smembers",this.getKeyReferenceLabel(l)]),a=await this.store.pipeline(o).exec();this.log.debug({msg:"acd/storage/redis.clearReferences references",keys:s,referencesKeys:a});const c={};for(let l=0;l<s.length;l++){for(let f=0;f<a[l][1].length;f++){const d=this.getReferenceKeyLabel(a[l][1][f]);c[d]||(c[d]=["srem",d,s])}const u=this.getKeyReferenceLabel(s[l]);c[u]=["del",u]}this.log.debug({msg:"acd/storage/redis.clearReferences writes pipeline",writes:c}),await this.store.pipeline(Object.values(c)).exec()}catch(o){this.log.error({msg:"acd/storage/redis.clearReferences error",err:o})}}async gc(s="lazy",o={}){if(this.log.debug({msg:"acd/storage/redis.gc",mode:s,options:o}),!this.invalidation)return void this.log.warn({msg:"acd/storage/redis.gc does not run due to invalidation is disabled"});s!=="strict"&&s!=="lazy"&&(s="lazy");const a={references:{scanned:[],removed:[]},keys:{scanned:new Set,removed:new Set},loops:0,cursor:0,error:null};try{let c=0,l=64;if(o.chunk&&(typeof o.chunk!="number"||o.chunk<1))return a.error=new Error("chunk must be a positive integer greater than 1"),a;if(o.lazy){if(o.lazy.chunk){if(typeof o.lazy.chunk!="number"||o.lazy.chunk<1)return a.error=new Error("lazy.chunk must be a positive integer greater than 1"),a;l=o.lazy.chunk}if(o.lazy.cursor){if(typeof o.lazy.cursor!="number"||o.lazy.cursor<0)return a.error=new Error("lazy.cursor must be a positive integer greater than 0"),a;c=o.lazy.cursor}}const u=o.chunk||64,f=Math.min(l,u),d=c;let p=-1,h=-1;do{a.loops++;const y=await this.store.scan(c,"match","r:*","count",f);c=Number(y[0]),p=y[1].length;const m=s==="lazy"?n(y[1],l):y[1];a.references.scanned=a.references.scanned.concat(m);let v=[];for(let g=0;g<m.length;g++){const b=m[g];v.push(["smembers",b])}const k=await this.store.pipeline(v).exec(),S={},w={};for(let g=0;g<k.length;g++){const b=k[g],O=m[g];w[O]=b[1];for(let E=0;E<b[1].length;E++){const R=b[1][E];S[R]?S[R].push(O):S[R]=[O],a.keys.scanned.add(R)}}const _=Object.keys(S);v=_.map(g=>["exists",g]);const A=await this.store.pipeline(v).exec(),$={};for(let g=0;g<_.length;g++){const b=_[g];if(A[g][1]!==1)for(let O=0;O<S[b].length;O++){const E=S[b][O];$[E]?$[E].push(b):$[E]=[b],a.keys.removed.add(b)}}const x=Object.keys($),T=[];for(let g=0;g<x.length;g++){const b=x[g];w[b].length===$[b].length?(T.push(["del",b]),a.references.removed.push(b)):T.push(["srem",b,$[b]])}if(await this.store.pipeline(T).exec(),h=T.length,s==="lazy"&&a.references.scanned.length>=l)break}while(d!==c&&p>0&&h>0);a.cursor=c,a.keys.scanned=Array.from(a.keys.scanned),a.keys.removed=Array.from(a.keys.removed)}catch(c){this.log.error({msg:"acd/storage/redis.gc error",err:c}),a.error=c}return a}}}());const ci=ai,Sr="redis";var dn=function(e,t){if(!fn&&e===Sr)throw new Error("Redis storage is not supported in the browser");return e===Sr?new hn(t):new ci(t)};const{kValues:Q,kStorage:$r,kStorages:xe,kTransfromer:Cr,kTTL:kr,kOnDedupe:Ar,kOnError:Or,kOnHit:Tr,kOnMiss:Rr,kStale:Pr}=Bs,ui=an,li=dn;class fi{constructor(t,r,n,i,s,o,a,c,l,u,f,d){this.dedupes=new Map,this.func=t,this.name=r,this.serialize=n,this.references=i,this.storage=s,this.transformer=o,this.ttl=a,this.onDedupe=c,this.onError=l,this.onHit=u,this.onMiss=f,this.stale=d}getKey(t){const r=this.serialize?this.serialize(t):t;return typeof r=="string"?r:ui(r)}getStorageKey(t){return`${this.name}~${t}`}getStorageName(){return`${this.name}~`}add(t){try{const r=this.getKey(t);let n=this.dedupes.get(r);return n?this.onDedupe(r):(n=new hi,this.buildPromise(n,t,r),this.dedupes.set(r,n)),n.promise}catch(r){this.onError(r)}}async wrapFunction(t,r){const n=this.getStorageKey(r);if(this.ttl>0||typeof this.ttl=="function"){const i=await this.get(n);if(i!==void 0){this.onHit(r);const s=typeof this.stale=="function"?this.stale(i):this.stale;return s>0&&await this.storage.getTTL(n)<=s&&this._wrapFunction(n,t,r).catch(ke),i}this.onMiss(r)}return this._wrapFunction(n,t,r)}async _wrapFunction(t,r,n){const i=await this.func(r,n),s=typeof this.stale=="function"?this.stale(i):this.stale;let o=typeof this.ttl=="function"?this.ttl(i):this.ttl;if(o==null||typeof o!="number"||!Number.isInteger(o))return this.onError(new Error("ttl must be an integer")),i;if(o+=s,o<1)return i;if(!this.references)return await this.set(t,i,o),i;try{let a=this.references(r,n,i),c=i;a&&typeof a.then=="function"&&(a=await a),this.transformer&&(c=this.transformer.serialize(i)),await this.storage.set(t,c,o,a)}catch(a){this.onError(a)}return i}buildPromise(t,r,n){t.promise=this.wrapFunction(r,n),t.promise.then(i=>(this.dedupes.delete(n),i)).catch(i=>{this.onError(i),this.dedupes.delete(n);const s=this.storage.remove(this.getStorageKey(n));s&&typeof s.catch=="function"&&s.catch(ke)})}async clear(t){if(t){const r=this.getKey(t);return this.dedupes.delete(r),void await this.storage.remove(this.getStorageKey(r))}await this.storage.clear(this.getStorageName()),this.dedupes.clear()}async get(t){const r=await this.storage.get(t);return this.transformer&&r?await this.transformer.deserialize(r):r}async set(t,r,n,i){return this.transformer&&(r=this.transformer.serialize(r)),this.storage.set(t,r,n,i)}async invalidate(t){return this.storage.invalidate(t)}}class hi{constructor(){this.promise=null}}function ke(){}on.Cache=class{constructor(e={}){if(!e.storage)throw new Error("storage is required");if(e.ttl&&typeof e.ttl=="number"&&(e.ttl<0||!Number.isInteger(e.ttl)))throw new Error("ttl must be a positive integer greater than 0");if(e.onDedupe&&typeof e.onDedupe!="function")throw new Error("onDedupe must be a function");if(e.onError&&typeof e.onError!="function")throw new Error("onError must be a function");if(e.onHit&&typeof e.onHit!="function")throw new Error("onHit must be a function");if(e.onMiss&&typeof e.onMiss!="function")throw new Error("onMiss must be a function");if(typeof e.stale=="number"&&!(Math.floor(e.stale)===e.stale&&e.stale>=0))throw new Error("stale must be an integer greater or equal to 0");this[Q]={},this[$r]=e.storage,this[xe]=new Map,this[xe].set("_default",e.storage),this[Cr]=e.transformer,this[kr]=e.ttl||0,this[Ar]=e.onDedupe||ke,this[Or]=e.onError||ke,this[Tr]=e.onHit||ke,this[Rr]=e.onMiss||ke,this[Pr]=e.stale||0}define(e,t,r){if(typeof t=="function"&&(r=t,t={}),e&&this[e])throw new Error(`${e} is already defined in the cache or it is a forbidden name`);if(t=t||{},typeof r!="function")throw new TypeError(`Missing the function parameter for '${e}'`);const n=t.serialize;if(n&&typeof n!="function")throw new TypeError("serialize must be a function");const i=t.references;if(i&&typeof i!="function")throw new TypeError("references must be a function");if(typeof t.ttl!="function"&&t.ttl&&(typeof t.ttl!="number"||t.ttl<0||!Number.isInteger(t.ttl)))throw new Error("ttl must be a positive integer greater than 0");let s;t.storage?(s=li(t.storage.type,t.storage.options),this[xe].set(e,s)):s=this[$r];const o=t.ttl!==void 0?t.ttl:this[kr],a=t.stale!==void 0?t.stale:this[Pr],c=t.onDedupe||this[Ar],l=t.onError||this[Or],u=t.onHit||this[Tr],f=t.onMiss||this[Rr],d=t.transformer||this[Cr],p=new fi(r,e,n,i,s,d,o,c,l,u,f,a);return this[Q][e]=p,this[e]=p.add.bind(p),this}async clear(e,t){if(e){if(!this[Q][e])throw new Error(`${e} is not defined in the cache`);return void await this[Q][e].clear(t)}const r=[];for(const n of Object.values(this[Q]))r.push(n.clear());await Promise.all(r)}async get(e,t){if(!this[Q][e])throw new Error(`${e} is not defined in the cache`);return this[Q][e].get(t)}async set(e,t,r,n,i){if(!this[Q][e])throw new Error(`${e} is not defined in the cache`);return this[Q][e].set(t,r,n,i)}async invalidate(e,t){if(!this[Q][e])throw new Error(`${e} is not defined in the cache`);return this[Q][e].invalidate(t)}async invalidateAll(e,t="_default"){if(!this[xe].has(t))throw new Error(`${t} storage is not defined in the cache`);await this[xe].get(t).invalidate(e)}};const{Cache:xr}=on,Mr=dn;var di={Cache:xr,createCache:function(e){e?e.storage||(e.storage={type:"memory"}):e={storage:{type:"memory"}};const t=Mr(e.storage.type,e.storage.options);return new xr({...e,storage:t})},createStorage:Mr};let It=0,Ir=[],z=[],jr=(e,t)=>{let r=[],n={get:()=>(n.lc||n.listen(()=>{})(),n.value),l:0,lc:0,listen:(i,s)=>(n.lc=r.push(i,s||n.l)/2,()=>{let o=r.indexOf(i);~o&&(r.splice(o,2),--n.lc||n.off())}),notify(i,s){let o=!z.length;for(let a=0;a<r.length;a+=2)z.push(r[a],r[a+1],n.value,i,s);if(o){for(let a=0;a<z.length;a+=5){let c;for(let l=a+1;!c&&(l+=5)<z.length;)z[l]<z[a+1]&&(c=z.push(z[a],z[a+1],z[a+2],z[a+3],z[a+4]));c||z[a](z[a+2],z[a+3],z[a+4])}z.length=0}},off(){},set(i){let s=n.value;s!==i&&(n.value=i,n.notify(s))},subscribe(i,s){let o=n.listen(i,s);return i(n.value),o},value:e};return n};const jt=typeof document>"u"?"server":"browser";function Fr(e){return e.withConfig({allowReconfigure:!1})}const pi=e=>{const{ssr:t=!1,tag:r="core-loader"}=e;if(t&&e.client)throw new TypeError("`client` option is not allowed when `ssr: true`, use `setServerClient` from your server entry point instead");if(!t&&e.client===!1)throw new TypeError("You must set `ssr: true` when `client: false` is used");if(!t&&!e.client)throw new TypeError("`client` is required");let n=t?void 0:Fr(e.client);function i(u){return di.createCache().define("fetch",async f=>{if(!u)throw new Error("You have to set the Sanity client with `setServerClient` before any data fetching is done");const{query:d,params:p={},perspective:h,useCdn:y}=JSON.parse(f),{result:m,resultSourceMap:v}=await u.fetch(d,p,{tag:r,filterResponse:!1,perspective:h,useCdn:y});return{result:m,resultSourceMap:v}})}function s(){const u=(n==null?void 0:n.config().perspective)||"published";return o.instance=i(n),{hydrate:(f,d,p)=>({loading:(p==null?void 0:p.data)===void 0||(p==null?void 0:p.sourceMap)===void 0,error:void 0,data:p==null?void 0:p.data,sourceMap:p==null?void 0:p.sourceMap,perspective:u}),fetch:(f,d,p,h)=>{if(h.signal.aborted)return;const y=(It+=1,()=>{if(It-=1,It===0){let m=Ir;Ir=[];for(let v of m)v()}});p.setKey("loading",!0),p.setKey("error",void 0),o.instance.fetch(JSON.stringify({query:f,params:d})).then(m=>{h.signal.aborted||(p.setKey("data",m.result),p.setKey("sourceMap",m.resultSourceMap),p.setKey("perspective",u))}).catch(m=>{p.setKey("error",m)}).finally(()=>{p.setKey("loading",!1),y()})}}}const o={instance:i(n)},a=jr(n?s():void 0),c=(u=>{const{ssr:f,setFetcher:d}=u;return p=>{if(jt==="server")throw new Error("Live mode is not supported in server environments");if(f&&!p.client)throw new Error("The `client` option in `enableLiveMode` is required");const h=p.client||u.client||void 0,y=new AbortController;let m;return Ct(async()=>{const{enableLiveMode:v}=await import("./enableLiveMode.BCh7FD3X.js");return{enableLiveMode:v}},__vite__mapDeps([0,1]),import.meta.url).then(({enableLiveMode:v})=>{y.signal.aborted||(m=v({...p,client:h,setFetcher:d,ssr:f}))}),()=>{y.abort(),m==null||m()}}})({client:n||void 0,ssr:t,setFetcher:u=>{const f=a.get();return a.set(u),()=>a.set(f)}}),l={instance:void 0,canPreviewDrafts:!1};return{createFetcherStore:(u,f={},d)=>{const p=a.get(),h=((_={})=>{let A=jr(_);return A.setKey=function($,x){let T=A.value;typeof x>"u"&&$ in A.value?(A.value={...A.value},delete A.value[$],A.notify(T,$)):A.value[$]!==x&&(A.value={...A.value,[$]:x},A.notify(T,$))},A})(p?p.hydrate(u,f,d):{loading:!1,error:typeof(d==null?void 0:d.data)>"u"?new Error("The `initial` option is required when `ssr: true`"):void 0,data:d==null?void 0:d.data,sourceMap:d==null?void 0:d.sourceMap,perspective:d==null?void 0:d.perspective});return m=()=>{let _=new AbortController;const A=a.subscribe($=>{!$||_.signal.aborted||(_.abort(),_=new AbortController,$.fetch(u,f,h,_))});return()=>{_.abort(),A()}},k=_=>{let A=m(_);A&&y.events[6].push(A)},S=5,w=_=>{let A=y.listen;y.listen=(...x)=>(!y.lc&&!y.active&&(y.active=!0,_()),A(...x));let $=y.off;return y.events[6]=[],y.off=()=>{$(),setTimeout(()=>{if(y.active&&!y.lc){y.active=!1;for(let x of y.events[6])x();y.events[6]=[]}},1e3)},()=>{y.listen=A,y.off=$}},(v=y=h).events=v.events||{},v.events[S+10]||(v.events[S+10]=w(_=>{v.events[S].reduceRight((A,$)=>($(A),A),{shared:{},..._})})),v.events[S]=v.events[S]||[],v.events[S].push(k),h;var y,m,v,k,S,w},enableLiveMode:c,setServerClient:u=>{if(jt!=="server")throw new Error("`setServerClient` can only be called in server environments, detected: "+JSON.stringify(jt));if(!t)throw new Error("`setServerClient` can only be called when `ssr: true`");l.instance=n=Fr(u),l.canPreviewDrafts=!!n.config().token,a.set(s())},unstable__cache:o,unstable__serverClient:l}};var Fc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yi(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var gi=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,i,s;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(i=n;i--!==0;)if(!e(t[i],r[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(s=Object.keys(t),n=s.length,n!==Object.keys(r).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(r,s[i]))return!1;for(i=n;i--!==0;){var o=s[i];if(!e(t[o],r[o]))return!1}return!0}return t!==t&&r!==r};const mi=yi(gi);function Ot(e,t,r,n,i){var s,o,a,c,l,u;const f=i&&"input"in i?i.input:r.value,d=(s=i==null?void 0:i.expected)!=null?s:e.expects,p=(o=i==null?void 0:i.received)!=null?o:function(v){var k,S,w;let _=typeof v;return _==="object"&&(_=(w=v&&((S=(k=Object.getPrototypeOf(v))==null?void 0:k.constructor)==null?void 0:S.name))!=null?w:"null"),_==="string"?`"${v}"`:_==="number"||_==="bigint"||_==="boolean"?`${v}`:_}(f),h={kind:e.kind,type:e.type,input:f,expected:d,received:p,message:`Invalid ${t}: ${d?`Expected ${d} but r`:"R"}eceived ${p}`,requirement:e.requirement,path:i==null?void 0:i.path,issues:i==null?void 0:i.issues,lang:n.lang,abortEarly:n.abortEarly,abortPipeEarly:n.abortPipeEarly,skipPipe:n.skipPipe},y=e.kind==="schema",m=(u=(l=(c=(a=e.message)!=null?a:function(v,k){var S;return(S=void 0)==null?void 0:S.get(k)}(e.reference,h.lang))!=null?c:y?(h.lang,void 0):null)!=null?l:n.message)!=null?u:function(v){}(h.lang);m&&(h.message=typeof m=="function"?m(h):m),y&&(r.typed=!1),r.issues?r.issues.push(h):r.issues=[h]}function vi(e){return e!=="__proto__"&&e!=="prototype"&&e!=="constructor"}function rr(e,t){return{kind:"schema",type:"object",reference:rr,expects:"Object",async:!1,entries:e,message:t,_run(r,n){var i;const s=r.value;if(s&&typeof s=="object"){r.typed=!0,r.value={};for(const o in this.entries){const a=s[o],c=this.entries[o]._run({typed:!1,value:a},n);if(c.issues){const l={type:"object",origin:"value",input:s,key:o,value:a};for(const u of c.issues)u.path?u.path.unshift(l):u.path=[l],(i=r.issues)==null||i.push(u);if(r.issues||(r.issues=c.issues),n.abortEarly){r.typed=!1;break}}c.typed||(r.typed=!1),(c.value!==void 0||o in s)&&(r.value[o]=c.value)}}else Ot(this,"type",r,n);return r}}}function Tt(e,...t){const r={kind:"schema",type:"optional",reference:Tt,expects:`${e.expects} | undefined`,async:!1,wrapped:e,_run(n,i){return n.value===void 0&&("default"in this&&(n.value=function(s,o,a){return typeof s.default=="function"?s.default(o,a):s.default}(this,n,i)),n.value===void 0)?(n.typed=!0,n):this.wrapped._run(n,i)}};return 0 in t&&(r.default=t[0]),r}function Rt(e){return{kind:"schema",type:"string",reference:Rt,expects:"string",async:!1,message:e,_run(t,r){return typeof t.value=="string"?t.typed=!0:Ot(this,"type",t,r),t}}}function wi(e){return e!==null&&Array.isArray(e)}function bi(e){let t="";for(const r of e)typeof r!="string"?typeof r!="number"?wi(r)?(t&&(t+=":"),t+=`${r.join(",")}}`):r._key&&(t&&(t+=":"),t+=`${r._key}`):(t&&(t+=":"),t+=`${r}`):(t&&(t+="."),t+=r);return t}const Ae=function(...e){return{...e[0],pipe:e,_run(t,r){for(let n=0;n<e.length;n++){t=e[n]._run(t,r);const i=e[n+1];if(r.skipPipe||t.issues&&(r.abortEarly||r.abortPipeEarly||(i==null?void 0:i.kind)==="schema"||(i==null?void 0:i.kind)==="transformation")){t.typed=!1;break}}return t}}}(Rt(),function e(t,r){return{kind:"validation",type:"min_length",reference:e,async:!1,expects:`>=${t}`,requirement:t,message:r,_run(n,i){return n.typed&&n.value.length<this.requirement&&Ot(this,"length",n,i,{received:`${n.value.length}`}),n}}}(1)),Me=Tt(Ae),_i=rr({baseUrl:Ae,dataset:Me,id:Ae,path:Ae,projectId:Me,tool:Me,type:Me,workspace:Me,isDraft:Tt(Rt())});function Ei(e){const{id:t,path:r,baseUrl:n,tool:i,workspace:s,type:o}=e;return a=e,_i._run({typed:!1,value:a},{abortEarly:!0}).issues?void 0:[["id",nn(t)],["type",o],["path",bi(er.fromString(r))],["base",encodeURIComponent(n)],["workspace",s],["tool",i],["isDraft",t.startsWith("drafts.")]].filter(([,c])=>!!c).map(c=>{const[l,u]=c;return u===!0?l:c.join("=")}).join(";");var a}rr({origin:Ae,href:Ae,data:Tt(function e(t,r,n){return{kind:"schema",type:"record",reference:e,expects:"Object",async:!1,key:t,value:r,message:n,_run(i,s){var o,a;const c=i.value;if(c&&typeof c=="object"){i.typed=!0,i.value={};for(const l in c)if(vi(l)){const u=c[l],f=this.key._run({typed:!1,value:l},s);if(f.issues){const p={type:"record",origin:"key",input:c,key:l,value:u};for(const h of f.issues)h.path=[p],(o=i.issues)==null||o.push(h);if(i.issues||(i.issues=f.issues),s.abortEarly){i.typed=!1;break}}const d=this.value._run({typed:!1,value:u},s);if(d.issues){const p={type:"record",origin:"value",input:c,key:l,value:u};for(const h of d.issues)h.path?h.path.unshift(p):h.path=[p],(a=i.issues)==null||a.push(h);if(i.issues||(i.issues=d.issues),s.abortEarly){i.typed=!1;break}}(!f.typed||!d.typed)&&(i.typed=!1),f.typed&&(i.value[f.value]=d.value)}}else Ot(this,"type",i,s);return i}}}(Rt(),function e(){return{kind:"schema",type:"unknown",reference:e,expects:"unknown",async:!1,_run:t=>(t.typed=!0,t)}}()))});const Si=(e,t,r,n)=>{if(!t||!r)return;const i=Us(n),s=Ws({resultPath:i,resultSourceMap:t,studioUrl:r});return s?Ei({baseUrl:s.baseUrl,workspace:s.workspace,tool:s.tool,type:s.type,id:s.id,path:typeof s.path=="string"?s.path:er.toString(sn(s.path))}):void 0};function pn(e,t,r,n){const i=o=>o?typeof o=="string"?er.fromString(o):o:[],s=i(n);return Object.assign(o=>Si(0,t,r,[...s,...i(o)]),{scope:o=>pn(e,t,r,[...s,...i(o)])})}function $i(e,t,r){return pn(e,t,r)}const Ci=e=>{const{createFetcherStore:t,setServerClient:r,enableLiveMode:n,unstable__cache:i,unstable__serverClient:s}=pi({tag:"svelte-loader",...e}),o=(l=e.client,Nt(typeof l=="object"?l==null?void 0:l.config().stega.studioUrl:void 0)),a=function({createFetcherStore:u,studioUrlStore:f}){const d={},p={};return(h,y=d,m=p)=>{typeof h=="object"&&(y=h.params||d,m=h.options||p,h=h.query);const v=m.initial?{perspective:"published",...m.initial}:void 0,k=JSON.stringify(y),S=u(h,JSON.parse(k),v),w=Nt(S.value);return As(()=>S.subscribe(_=>{const A=Os(w);A.error!==_.error&&w.set(_),A.loading!==_.loading&&w.set(_),A.perspective!==_.perspective&&w.set(_),mi(A.data,_.data)||w.set(_)})),Rs([w,f],([_,A])=>({..._,encodeDataAttribute:$i(_.data,_.sourceMap,A)}))}}({createFetcherStore:t,studioUrlStore:o}),c=function({enableLiveMode:u,studioUrlStore:f}){return({allowStudioOrigin:d,client:p,onConnect:h,onDisconnect:y,studioUrl:m}={})=>(d&&console.warn("`allowStudioOrigin` is deprecated and no longer needed"),f.set(m??(typeof p=="object"?p==null?void 0:p.config().stega.studioUrl:void 0)),u({client:p,onConnect:h,onDisconnect:y}))}({enableLiveMode:n,studioUrlStore:o});var l;return{loadQuery:async(u,f={},d={})=>{var p;const{headers:h,tag:y}=d,m=d.perspective||((p=s.instance)==null?void 0:p.config().perspective)||"published";if(typeof document<"u")throw new Error("Cannot use `loadQuery` in a browser environment, you should use it inside a loader, getStaticProps, getServerSideProps, getInitialProps, or in a React Server Component.");if(m!=="published"&&!s.instance)throw new Error('You cannot use other perspectives than "published" unless you set "ssr: true" and call "setServerClient" first.');if(m==="previewDrafts"){if(!s.canPreviewDrafts)throw new Error('You cannot use "previewDrafts" unless you set a "token" in the "client" instance passed to "setServerClient".');const{result:w,resultSourceMap:_}=await s.instance.fetch(u,f,{filterResponse:!1,resultSourceMap:"withKeyArraySelector",perspective:m,useCdn:!1,headers:h,tag:y});return{data:w,sourceMap:_,perspective:m}}const v=d.useCdn||s.instance.config().useCdn,{result:k,resultSourceMap:S}=await i.instance.fetch(JSON.stringify({query:u,params:f,perspective:m,useCdn:v}));return S?{data:k,sourceMap:S}:{data:k}},useQuery:a,setServerClient:r,useLiveMode:c,unstable__serverClient:s}},{loadQuery:Lc,setServerClient:qc,useLiveMode:Dc,useQuery:Uc,unstable__serverClient:Nc}=Ci({client:!1,ssr:!0}),yn=Nt(!1);Ts(yn);yn.set;const gn=typeof navigator>"u"?!1:navigator.product==="ReactNative",mn={timeout:gn?6e4:12e4},ki=function(e){const t={...mn,...typeof e=="string"?{url:e}:e};if(t.timeout=vn(t.timeout),t.query){const{url:r,searchParams:n}=Ai(t.url);for(const[i,s]of Object.entries(t.query)){if(s!==void 0)if(Array.isArray(s))for(const a of s)n.append(i,a);else n.append(i,s);const o=n.toString();o&&(t.url=`${r}?${o}`)}}return t.method=t.body&&!t.method?"POST":(t.method||"GET").toUpperCase(),t};function Ai(e){const t=e.indexOf("?");if(t===-1)return{url:e,searchParams:new URLSearchParams};const r=e.slice(0,t),n=e.slice(t+1);if(!gn)return{url:r,searchParams:new URLSearchParams(n)};if(typeof decodeURIComponent!="function")throw new Error("Broken `URLSearchParams` implementation, and `decodeURIComponent` is not defined");const i=new URLSearchParams;for(const s of n.split("&")){const[o,a]=s.split("=");o&&i.append(Lr(o),Lr(a||""))}return{url:r,searchParams:i}}function Lr(e){return decodeURIComponent(e.replace(/\+/g," "))}function vn(e){if(e===!1||e===0)return!1;if(e.connect||e.socket)return e;const t=Number(e);return isNaN(t)?vn(mn.timeout):{connect:t,socket:t}}const Oi=/^https?:\/\//i,Ti=function(e){if(!Oi.test(e.url))throw new Error(`"${e.url}" is not a valid URL`)};function Ri(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}const Pi=e=>function(t,r,...n){const i=t==="onError";let s=r;for(let o=0;o<e[t].length;o++){const a=e[t][o];if(s=a(s,...n),i&&!s)break}return s};function xi(){const e=Object.create(null);let t=0;function r(i){const s=t++;return e[s]=i,function(){delete e[s]}}function n(i){for(const s in e)e[s](i)}return{publish:n,subscribe:r}}const Mi=["request","response","progress","error","abort"],qr=["processOptions","validateOptions","interceptRequest","finalizeOptions","onRequest","onResponse","onError","onReturn","onHeaders"];function wn(e,t){const r=[],n=qr.reduce((s,o)=>(s[o]=s[o]||[],s),{processOptions:[ki],validateOptions:[Ti]});function i(s){const o=(h,y,m)=>{let v=h,k=y;if(!v)try{k=c("onResponse",y,m)}catch(S){k=null,v=S}v=v&&c("onError",v,m),v?a.error.publish(v):k&&a.response.publish(k)},a=Mi.reduce((h,y)=>(h[y]=xi(),h),{}),c=Pi(n),l=c("processOptions",s);c("validateOptions",l);const u={options:l,channels:a,applyMiddleware:c};let f;const d=a.request.subscribe(h=>{f=t(h,(y,m)=>o(y,m,h))});a.abort.subscribe(()=>{d(),f&&f.abort()});const p=c("onReturn",a,u);return p===a&&a.request.publish(u),p}return i.use=function(s){if(!s)throw new Error("Tried to add middleware that resolved to falsey value");if(typeof s=="function")throw new Error("Tried to add middleware that was a function. It probably expects you to pass options to it.");if(s.onReturn&&n.onReturn.length>0)throw new Error("Tried to add new middleware with `onReturn` handler, but another handler has already been registered for this event");return qr.forEach(o=>{s[o]&&n[o].push(s[o])}),r.push(s),i},i.clone=()=>wn(r,t),e.forEach(i.use),i}var Ft=function(e){return e.replace(/^\s+|\s+$/g,"")},Ii=function(e){return Object.prototype.toString.call(e)==="[object Array]"},ji=function(e){if(!e)return{};for(var t={},r=Ft(e).split(`
`),n=0;n<r.length;n++){var i=r[n],s=i.indexOf(":"),o=Ft(i.slice(0,s)).toLowerCase(),a=Ft(i.slice(s+1));typeof t[o]>"u"?t[o]=a:Ii(t[o])?t[o].push(a):t[o]=[t[o],a]}return t},Fi=Ri(ji),Li=Object.defineProperty,bn=e=>{throw TypeError(e)},qi=(e,t,r)=>t in e?Li(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,X=(e,t,r)=>qi(e,typeof t!="symbol"?t+"":t,r),_n=(e,t,r)=>t.has(e)||bn("Cannot "+r),G=(e,t,r)=>(_n(e,t,"read from private field"),r?r.call(e):t.get(e)),he=(e,t,r)=>t.has(e)?bn("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),ie=(e,t,r,n)=>(_n(e,t,"write to private field"),t.set(e,r),r),Xe,Ze,Ee,et,oe,tt,rt;class Ht{constructor(){X(this,"onabort"),X(this,"onerror"),X(this,"onreadystatechange"),X(this,"ontimeout"),X(this,"readyState",0),X(this,"response"),X(this,"responseText",""),X(this,"responseType",""),X(this,"status"),X(this,"statusText"),X(this,"withCredentials"),he(this,Xe),he(this,Ze),he(this,Ee),he(this,et,{}),he(this,oe),he(this,tt,{}),he(this,rt)}open(t,r,n){var i;ie(this,Xe,t),ie(this,Ze,r),ie(this,Ee,""),this.readyState=1,(i=this.onreadystatechange)==null||i.call(this),ie(this,oe,void 0)}abort(){G(this,oe)&&G(this,oe).abort()}getAllResponseHeaders(){return G(this,Ee)}setRequestHeader(t,r){G(this,et)[t]=r}setInit(t,r=!0){ie(this,tt,t),ie(this,rt,r)}send(t){const r=this.responseType!=="arraybuffer",n={...G(this,tt),method:G(this,Xe),headers:G(this,et),body:t};typeof AbortController=="function"&&G(this,rt)&&(ie(this,oe,new AbortController),typeof EventTarget<"u"&&G(this,oe).signal instanceof EventTarget&&(n.signal=G(this,oe).signal)),typeof document<"u"&&(n.credentials=this.withCredentials?"include":"omit"),fetch(G(this,Ze),n).then(i=>{var s;return i.headers.forEach((o,a)=>{ie(this,Ee,G(this,Ee)+`${a}: ${o}\r
`)}),this.status=i.status,this.statusText=i.statusText,this.readyState=3,(s=this.onreadystatechange)==null||s.call(this),r?i.text():i.arrayBuffer()}).then(i=>{var s;typeof i=="string"?this.responseText=i:this.response=i,this.readyState=4,(s=this.onreadystatechange)==null||s.call(this)}).catch(i=>{var s,o;if(i.name==="AbortError"){(s=this.onabort)==null||s.call(this);return}(o=this.onerror)==null||o.call(this,i)})}}Xe=new WeakMap,Ze=new WeakMap,Ee=new WeakMap,et=new WeakMap,oe=new WeakMap,tt=new WeakMap,rt=new WeakMap;const Bt=typeof XMLHttpRequest=="function"?"xhr":"fetch",Di=Bt==="xhr"?XMLHttpRequest:Ht,Ui=(e,t)=>{var r;const n=e.options,i=e.applyMiddleware("finalizeOptions",n),s={},o=e.applyMiddleware("interceptRequest",void 0,{adapter:Bt,context:e});if(o){const w=setTimeout(t,0,null,o);return{abort:()=>clearTimeout(w)}}let a=new Di;a instanceof Ht&&typeof i.fetch=="object"&&a.setInit(i.fetch,(r=i.useAbortSignal)!=null?r:!0);const c=i.headers,l=i.timeout;let u=!1,f=!1,d=!1;if(a.onerror=w=>{a instanceof Ht?v(w instanceof Error?w:new Error(`Request error while attempting to reach is ${i.url}`,{cause:w})):v(new Error(`Request error while attempting to reach is ${i.url}${w.lengthComputable?`(${w.loaded} of ${w.total} bytes transferred)`:""}`))},a.ontimeout=w=>{v(new Error(`Request timeout while attempting to reach ${i.url}${w.lengthComputable?`(${w.loaded} of ${w.total} bytes transferred)`:""}`))},a.onabort=()=>{m(!0),u=!0},a.onreadystatechange=()=>{y(),!(u||a.readyState!==4)&&a.status!==0&&S()},a.open(i.method,i.url,!0),a.withCredentials=!!i.withCredentials,c&&a.setRequestHeader)for(const w in c)c.hasOwnProperty(w)&&a.setRequestHeader(w,c[w]);return i.rawBody&&(a.responseType="arraybuffer"),e.applyMiddleware("onRequest",{options:i,adapter:Bt,request:a,context:e}),a.send(i.body||null),l&&(s.connect=setTimeout(()=>h("ETIMEDOUT"),l.connect)),{abort:p};function p(){u=!0,a&&a.abort()}function h(w){d=!0,a.abort();const _=new Error(w==="ESOCKETTIMEDOUT"?`Socket timed out on request to ${i.url}`:`Connection timed out on request to ${i.url}`);_.code=w,e.channels.error.publish(_)}function y(){l&&(m(),s.socket=setTimeout(()=>h("ESOCKETTIMEDOUT"),l.socket))}function m(w){(w||u||a.readyState>=2&&s.connect)&&clearTimeout(s.connect),s.socket&&clearTimeout(s.socket)}function v(w){if(f)return;m(!0),f=!0,a=null;const _=w||new Error(`Network error while attempting to reach ${i.url}`);_.isNetworkError=!0,_.request=i,t(_)}function k(){return{body:a.response||(a.responseType===""||a.responseType==="text"?a.responseText:""),url:i.url,method:i.method,headers:Fi(a.getAllResponseHeaders()),statusCode:a.status,statusMessage:a.statusText}}function S(){if(!(u||f||d)){if(a.status===0){v(new Error("Unknown XHR error"));return}m(),f=!0,t(null,k())}}},Ni=(e=[],t=Ui)=>wn(e,t);var zi={},Dr={exports:{}},Lt,Ur;function Ki(){if(Ur)return Lt;Ur=1;var e=1e3,t=e*60,r=t*60,n=r*24,i=n*7,s=n*365.25;Lt=function(u,f){f=f||{};var d=typeof u;if(d==="string"&&u.length>0)return o(u);if(d==="number"&&isFinite(u))return f.long?c(u):a(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function o(u){if(u=String(u),!(u.length>100)){var f=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(u);if(f){var d=parseFloat(f[1]),p=(f[2]||"ms").toLowerCase();switch(p){case"years":case"year":case"yrs":case"yr":case"y":return d*s;case"weeks":case"week":case"w":return d*i;case"days":case"day":case"d":return d*n;case"hours":case"hour":case"hrs":case"hr":case"h":return d*r;case"minutes":case"minute":case"mins":case"min":case"m":return d*t;case"seconds":case"second":case"secs":case"sec":case"s":return d*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return d;default:return}}}}function a(u){var f=Math.abs(u);return f>=n?Math.round(u/n)+"d":f>=r?Math.round(u/r)+"h":f>=t?Math.round(u/t)+"m":f>=e?Math.round(u/e)+"s":u+"ms"}function c(u){var f=Math.abs(u);return f>=n?l(u,f,n,"day"):f>=r?l(u,f,r,"hour"):f>=t?l(u,f,t,"minute"):f>=e?l(u,f,e,"second"):u+" ms"}function l(u,f,d,p){var h=f>=d*1.5;return Math.round(u/d)+" "+p+(h?"s":"")}return Lt}function Wi(e){r.debug=r,r.default=r,r.coerce=c,r.disable=s,r.enable=i,r.enabled=o,r.humanize=Ki(),r.destroy=l,Object.keys(e).forEach(u=>{r[u]=e[u]}),r.names=[],r.skips=[],r.formatters={};function t(u){let f=0;for(let d=0;d<u.length;d++)f=(f<<5)-f+u.charCodeAt(d),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=t;function r(u){let f,d=null,p,h;function y(...m){if(!y.enabled)return;const v=y,k=Number(new Date),S=k-(f||k);v.diff=S,v.prev=f,v.curr=k,f=k,m[0]=r.coerce(m[0]),typeof m[0]!="string"&&m.unshift("%O");let w=0;m[0]=m[0].replace(/%([a-zA-Z%])/g,(_,A)=>{if(_==="%%")return"%";w++;const $=r.formatters[A];if(typeof $=="function"){const x=m[w];_=$.call(v,x),m.splice(w,1),w--}return _}),r.formatArgs.call(v,m),(v.log||r.log).apply(v,m)}return y.namespace=u,y.useColors=r.useColors(),y.color=r.selectColor(u),y.extend=n,y.destroy=r.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>d!==null?d:(p!==r.namespaces&&(p=r.namespaces,h=r.enabled(u)),h),set:m=>{d=m}}),typeof r.init=="function"&&r.init(y),y}function n(u,f){const d=r(this.namespace+(typeof f>"u"?":":f)+u);return d.log=this.log,d}function i(u){r.save(u),r.namespaces=u,r.names=[],r.skips=[];let f;const d=(typeof u=="string"?u:"").split(/[\s,]+/),p=d.length;for(f=0;f<p;f++)d[f]&&(u=d[f].replace(/\*/g,".*?"),u[0]==="-"?r.skips.push(new RegExp("^"+u.slice(1)+"$")):r.names.push(new RegExp("^"+u+"$")))}function s(){const u=[...r.names.map(a),...r.skips.map(a).map(f=>"-"+f)].join(",");return r.enable(""),u}function o(u){if(u[u.length-1]==="*")return!0;let f,d;for(f=0,d=r.skips.length;f<d;f++)if(r.skips[f].test(u))return!1;for(f=0,d=r.names.length;f<d;f++)if(r.names[f].test(u))return!0;return!1}function a(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function c(u){return u instanceof Error?u.stack||u.message:u}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}var Hi=Wi;(function(e,t){t.formatArgs=n,t.save=i,t.load=s,t.useColors=r,t.storage=o(),t.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const l="color: "+this.color;c.splice(1,0,l,"color: inherit");let u=0,f=0;c[0].replace(/%[a-zA-Z%]/g,d=>{d!=="%%"&&(u++,d==="%c"&&(f=u))}),c.splice(f,0,l)}t.log=console.debug||console.log||(()=>{});function i(c){try{c?t.storage.setItem("debug",c):t.storage.removeItem("debug")}catch{}}function s(){let c;try{c=t.storage.getItem("debug")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c=zi.DEBUG),c}function o(){try{return localStorage}catch{}}e.exports=Hi(t);const{formatters:a}=e.exports;a.j=function(c){try{return JSON.stringify(c)}catch(l){return"[UnexpectedJSONParseError]: "+l.message}}})(Dr,Dr.exports);const Bi=typeof Buffer>"u"?()=>!1:e=>Buffer.isBuffer(e);/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function Nr(e){return Object.prototype.toString.call(e)==="[object Object]"}function Vi(e){if(Nr(e)===!1)return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(Nr(r)===!1||r.hasOwnProperty("isPrototypeOf")===!1)}const Ji=["boolean","string","number"];function Gi(){return{processOptions:e=>{const t=e.body;return!t||!(typeof t.pipe!="function"&&!Bi(t)&&(Ji.indexOf(typeof t)!==-1||Array.isArray(t)||Vi(t)))?e:Object.assign({},e,{body:JSON.stringify(e.body),headers:Object.assign({},e.headers,{"Content-Type":"application/json"})})}}}function Yi(e){return{onResponse:r=>{const n=r.headers["content-type"]||"",i=n.indexOf("application/json")!==-1;return!r.body||!n||!i?r:Object.assign({},r,{body:t(r.body)})},processOptions:r=>Object.assign({},r,{headers:Object.assign({Accept:"application/json"},r.headers)})};function t(r){try{return JSON.parse(r)}catch(n){throw n.message=`Failed to parsed response body as JSON: ${n.message}`,n}}}let Fe={};typeof globalThis<"u"?Fe=globalThis:typeof window<"u"?Fe=window:typeof global<"u"?Fe=global:typeof self<"u"&&(Fe=self);var Qi=Fe;function Xi(e={}){const t=e.implementation||Qi.Observable;if(!t)throw new Error("`Observable` is not available in global scope, and no implementation was passed");return{onReturn:(r,n)=>new t(i=>(r.error.subscribe(s=>i.error(s)),r.progress.subscribe(s=>i.next(Object.assign({type:"progress"},s))),r.response.subscribe(s=>{i.next(Object.assign({type:"response"},s)),i.complete()}),r.request.publish(n),()=>r.abort.publish()))}}function Zi(){return{onRequest:e=>{if(e.adapter!=="xhr")return;const t=e.request,r=e.context;"upload"in t&&"onprogress"in t.upload&&(t.upload.onprogress=n("upload")),"onprogress"in t&&(t.onprogress=n("download"));function n(i){return s=>{const o=s.lengthComputable?s.loaded/s.total*100:-1;r.channels.progress.publish({stage:i,percent:o,total:s.total,loaded:s.loaded,lengthComputable:s.lengthComputable})}}}}}var eo=Object.defineProperty,to=(e,t,r)=>t in e?eo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,He=(e,t,r)=>to(e,typeof t!="symbol"?t+"":t,r);class ro{constructor(t){He(this,"__CANCEL__",!0),He(this,"message"),this.message=t}toString(){return`Cancel${this.message?`: ${this.message}`:""}`}}const zr=class{constructor(e){if(He(this,"promise"),He(this,"reason"),typeof e!="function")throw new TypeError("executor must be a function.");let t=null;this.promise=new Promise(r=>{t=r}),e(r=>{this.reason||(this.reason=new ro(r),t(this.reason))})}};He(zr,"source",()=>{let e;return{token:new zr(t=>{e=t}),cancel:e}});var En=(e,t,r)=>r.method!=="GET"&&r.method!=="HEAD"?!1:e.isNetworkError||!1;const no=e=>e!==null&&typeof e=="object"&&typeof e.pipe=="function";var so=e=>{const t=e.maxRetries||5,r=e.retryDelay||io,n=e.shouldRetry;return{onError:(i,s)=>{const o=s.options,a=o.maxRetries||t,c=o.retryDelay||r,l=o.shouldRetry||n,u=o.attemptNumber||0;if(no(o.body)||!l(i,u,o)||u>=a)return i;const f=Object.assign({},s,{options:Object.assign({},o,{attemptNumber:u+1})});return setTimeout(()=>s.channels.request.publish(f),c(u)),null}}};function io(e){return 100*Math.pow(2,e)+Math.random()*100}const nr=(e={})=>so({shouldRetry:En,...e});nr.shouldRetry=En;var Vt=function(e,t){return Vt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},Vt(e,t)};function sr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Vt(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function oo(e,t,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(u){try{l(n.next(u))}catch(f){o(f)}}function c(u){try{l(n.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})}function Sn(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){r.label=l[1];break}if(l[0]===6&&r.label<s[1]){r.label=s[1],s=l;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(l);break}s[2]&&r.ops.pop(),r.trys.pop();continue}l=t.call(e,r)}catch(u){l=[6,u],i=0}finally{n=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Be(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function we(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,s=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function be(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,s;n<i;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||Array.prototype.slice.call(t))}function Oe(e){return this instanceof Oe?(this.v=e,this):new Oe(e)}function ao(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(p){return function(h){return Promise.resolve(h).then(p,f)}}function a(p,h){n[p]&&(i[p]=function(y){return new Promise(function(m,v){s.push([p,y,m,v])>1||c(p,y)})},h&&(i[p]=h(i[p])))}function c(p,h){try{l(n[p](h))}catch(y){d(s[0][3],y)}}function l(p){p.value instanceof Oe?Promise.resolve(p.value.v).then(u,f):d(s[0][2],p)}function u(p){c("next",p)}function f(p){c("throw",p)}function d(p,h){p(h),s.shift(),s.length&&c(s[0][0],s[0][1])}}function co(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof Be=="function"?Be(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=e[s]&&function(o){return new Promise(function(a,c){o=e[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}function K(e){return typeof e=="function"}function $n(e){var t=function(n){Error.call(n),n.stack=new Error().stack},r=e(t);return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}var qt=$n(function(e){return function(r){e(this),this.message=r?r.length+` errors occurred during unsubscription:
`+r.map(function(n,i){return i+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=r}});function Kr(e,t){if(e){var r=e.indexOf(t);0<=r&&e.splice(r,1)}}var ir=function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var t,r,n,i,s;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var a=Be(o),c=a.next();!c.done;c=a.next()){var l=c.value;l.remove(this)}}catch(y){t={error:y}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}else o.remove(this);var u=this.initialTeardown;if(K(u))try{u()}catch(y){s=y instanceof qt?y.errors:[y]}var f=this._finalizers;if(f){this._finalizers=null;try{for(var d=Be(f),p=d.next();!p.done;p=d.next()){var h=p.value;try{Wr(h)}catch(y){s=s??[],y instanceof qt?s=be(be([],we(s)),we(y.errors)):s.push(y)}}}catch(y){n={error:y}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}}if(s)throw new qt(s)}},e.prototype.add=function(t){var r;if(t&&t!==this)if(this.closed)Wr(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(r=this._finalizers)!==null&&r!==void 0?r:[]).push(t)}},e.prototype._hasParent=function(t){var r=this._parentage;return r===t||Array.isArray(r)&&r.includes(t)},e.prototype._addParent=function(t){var r=this._parentage;this._parentage=Array.isArray(r)?(r.push(t),r):r?[r,t]:t},e.prototype._removeParent=function(t){var r=this._parentage;r===t?this._parentage=null:Array.isArray(r)&&Kr(r,t)},e.prototype.remove=function(t){var r=this._finalizers;r&&Kr(r,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}();ir.EMPTY;function Cn(e){return e instanceof ir||e&&"closed"in e&&K(e.remove)&&K(e.add)&&K(e.unsubscribe)}function Wr(e){K(e)?e():e.unsubscribe()}var kn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},An={setTimeout:function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return setTimeout.apply(void 0,be([e,t],we(r)))},clearTimeout:function(e){var t=An.delegate;return((t==null?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function On(e){An.setTimeout(function(){throw e})}function Hr(){}function uo(e){e()}var or=function(e){sr(t,e);function t(r){var n=e.call(this)||this;return n.isStopped=!1,r?(n.destination=r,Cn(r)&&r.add(n)):n.destination=po,n}return t.create=function(r,n,i){return new Jt(r,n,i)},t.prototype.next=function(r){this.isStopped||this._next(r)},t.prototype.error=function(r){this.isStopped||(this.isStopped=!0,this._error(r))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(r){this.destination.next(r)},t.prototype._error=function(r){try{this.destination.error(r)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(ir),lo=Function.prototype.bind;function Dt(e,t){return lo.call(e,t)}var fo=function(){function e(t){this.partialObserver=t}return e.prototype.next=function(t){var r=this.partialObserver;if(r.next)try{r.next(t)}catch(n){Qe(n)}},e.prototype.error=function(t){var r=this.partialObserver;if(r.error)try{r.error(t)}catch(n){Qe(n)}else Qe(t)},e.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(r){Qe(r)}},e}(),Jt=function(e){sr(t,e);function t(r,n,i){var s=e.call(this)||this,o;if(K(r)||!r)o={next:r??void 0,error:n??void 0,complete:i??void 0};else{var a;s&&kn.useDeprecatedNextContext?(a=Object.create(r),a.unsubscribe=function(){return s.unsubscribe()},o={next:r.next&&Dt(r.next,a),error:r.error&&Dt(r.error,a),complete:r.complete&&Dt(r.complete,a)}):o=r}return s.destination=new fo(o),s}return t}(or);function Qe(e){On(e)}function ho(e){throw e}var po={closed:!0,next:Hr,error:ho,complete:Hr},ar=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Tn(e){return e}function yo(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Rn(e)}function Rn(e){return e.length===0?Tn:e.length===1?e[0]:function(r){return e.reduce(function(n,i){return i(n)},r)}}var Y=function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(t,r,n){var i=this,s=mo(t)?t:new Jt(t,r,n);return uo(function(){var o=i,a=o.operator,c=o.source;s.add(a?a.call(s,c):c?i._subscribe(s):i._trySubscribe(s))}),s},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(r){t.error(r)}},e.prototype.forEach=function(t,r){var n=this;return r=Br(r),new r(function(i,s){var o=new Jt({next:function(a){try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});n.subscribe(o)})},e.prototype._subscribe=function(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)},e.prototype[ar]=function(){return this},e.prototype.pipe=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Rn(t)(this)},e.prototype.toPromise=function(t){var r=this;return t=Br(t),new t(function(n,i){var s;r.subscribe(function(o){return s=o},function(o){return i(o)},function(){return n(s)})})},e.create=function(t){return new e(t)},e}();function Br(e){var t;return(t=e??kn.Promise)!==null&&t!==void 0?t:Promise}function go(e){return e&&K(e.next)&&K(e.error)&&K(e.complete)}function mo(e){return e&&e instanceof or||go(e)&&Cn(e)}function vo(e){return K(e==null?void 0:e.lift)}function cr(e){return function(t){if(vo(t))return t.lift(function(r){try{return e(r,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function ur(e,t,r,n,i){return new wo(e,t,r,n,i)}var wo=function(e){sr(t,e);function t(r,n,i,s,o,a){var c=e.call(this,r)||this;return c.onFinalize=o,c.shouldUnsubscribe=a,c._next=n?function(l){try{n(l)}catch(u){r.error(u)}}:e.prototype._next,c._error=s?function(l){try{s(l)}catch(u){r.error(u)}finally{this.unsubscribe()}}:e.prototype._error,c._complete=i?function(){try{i()}catch(l){r.error(l)}finally{this.unsubscribe()}}:e.prototype._complete,c}return t.prototype.unsubscribe=function(){var r;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&((r=this.onFinalize)===null||r===void 0||r.call(this))}},t}(or);function bo(e){return e[e.length-1]}function _o(e){return K(bo(e))?e.pop():void 0}var Eo=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};function So(e){return K(e==null?void 0:e.then)}function $o(e){return K(e[ar])}function Co(e){return Symbol.asyncIterator&&K(e==null?void 0:e[Symbol.asyncIterator])}function ko(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function Ao(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Oo=Ao();function To(e){return K(e==null?void 0:e[Oo])}function Ro(e){return ao(this,arguments,function(){var r,n,i,s;return Sn(this,function(o){switch(o.label){case 0:r=e.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,Oe(r.read())];case 3:return n=o.sent(),i=n.value,s=n.done,s?[4,Oe(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,Oe(i)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return r.releaseLock(),[7];case 10:return[2]}})})}function Po(e){return K(e==null?void 0:e.getReader)}function xo(e){if(e instanceof Y)return e;if(e!=null){if($o(e))return Mo(e);if(Eo(e))return Io(e);if(So(e))return jo(e);if(Co(e))return Pn(e);if(To(e))return Fo(e);if(Po(e))return Lo(e)}throw ko(e)}function Mo(e){return new Y(function(t){var r=e[ar]();if(K(r.subscribe))return r.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Io(e){return new Y(function(t){for(var r=0;r<e.length&&!t.closed;r++)t.next(e[r]);t.complete()})}function jo(e){return new Y(function(t){e.then(function(r){t.closed||(t.next(r),t.complete())},function(r){return t.error(r)}).then(null,On)})}function Fo(e){return new Y(function(t){var r,n;try{for(var i=Be(e),s=i.next();!s.done;s=i.next()){var o=s.value;if(t.next(o),t.closed)return}}catch(a){r={error:a}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}t.complete()})}function Pn(e){return new Y(function(t){qo(e,t).catch(function(r){return t.error(r)})})}function Lo(e){return Pn(Ro(e))}function qo(e,t){var r,n,i,s;return oo(this,void 0,void 0,function(){var o,a;return Sn(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),r=co(e),c.label=1;case 1:return[4,r.next()];case 2:if(n=c.sent(),!!n.done)return[3,4];if(o=n.value,t.next(o),t.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=c.sent(),i={error:a},[3,11];case 6:return c.trys.push([6,,9,10]),n&&!n.done&&(s=r.return)?[4,s.call(r)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}function xn(e,t){return xo(e)}var Do=$n(function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}});function N(e,t){return new Promise(function(r,n){var i=!1,s;e.subscribe({next:function(o){s=o,i=!0},error:n,complete:function(){i?r(s):n(new Do)}})})}function ne(e,t){return cr(function(r,n){var i=0;r.subscribe(ur(n,function(s){n.next(e.call(t,s,i++))}))})}var Uo=Array.isArray;function No(e,t){return Uo(t)?e.apply(void 0,be([],we(t))):e(t)}function zo(e){return ne(function(t){return No(e,t)})}function Ko(e,t,r){return r===void 0&&(r=Tn),function(n){Vr(t,function(){for(var i=e.length,s=new Array(i),o=i,a=i,c=function(u){Vr(t,function(){var f=xn(e[u]),d=!1;f.subscribe(ur(n,function(p){s[u]=p,d||(d=!0,a--),a||n.next(r(s.slice()))},function(){--o||n.complete()}))},n)},l=0;l<i;l++)c(l)})}}function Vr(e,t,r){t()}var Wo=Array.isArray;function Ho(e){return e.length===1&&Wo(e[0])?e[0]:e}function Ve(e,t){return cr(function(r,n){var i=0;r.subscribe(ur(n,function(s){return e.call(t,s,i++)&&n.next(s)}))})}function Mn(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=_o(e);return r?yo(Mn.apply(void 0,be([],we(e))),zo(r)):cr(function(n,i){Ko(be([n],we(Ho(e))))(i)})}function Bo(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Mn.apply(void 0,be([],we(e)))}var In={0:8203,1:8204,2:8205,3:8290,4:8291,5:8288,6:65279,7:8289,8:119155,9:119156,a:119157,b:119158,c:119159,d:119160,e:119161,f:119162},lr={0:8203,1:8204,2:8205,3:65279},Vo=new Array(4).fill(String.fromCodePoint(lr[0])).join("");function Jo(e){let t=JSON.stringify(e);return`${Vo}${Array.from(t).map(r=>{let n=r.charCodeAt(0);if(n>255)throw new Error(`Only ASCII edit info can be encoded. Error attempting to encode ${t} on character ${r} (${n})`);return Array.from(n.toString(4).padStart(4,"0")).map(i=>String.fromCodePoint(lr[i])).join("")}).join("")}`}function Go(e){return!Number.isNaN(Number(e))||/[a-z]/i.test(e)&&!/\d+(?:[-:\/]\d+){2}(?:T\d+(?:[-:\/]\d+){1,2}(\.\d+)?Z?)?/.test(e)?!1:!!Date.parse(e)}function Yo(e){try{new URL(e,e.startsWith("/")?"https://acme.com":void 0)}catch{return!1}return!0}function zc(e,t,r="auto"){return r===!0||r==="auto"&&(Go(e)||Yo(e))?e:`${e}${Jo(t)}`}Object.fromEntries(Object.entries(lr).map(e=>e.reverse()));Object.fromEntries(Object.entries(In).map(e=>e.reverse()));var Qo=`${Object.values(In).map(e=>`\\u{${e.toString(16)}}`).join("")}`,Jr=new RegExp(`[${Qo}]{4,}`,"gu");function Xo(e){var t;return{cleaned:e.replace(Jr,""),encoded:((t=e.match(Jr))==null?void 0:t[0])||""}}function Zo(e){return e&&JSON.parse(Xo(JSON.stringify(e)).cleaned)}function ea(e){return Zo(e)}var ta=Object.defineProperty,ra=(e,t,r)=>t in e?ta(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ue=(e,t,r)=>(ra(e,typeof t!="symbol"?t+"":t,r),r);class na extends Error{constructor(t){const r=jn(t);super(r.message),ue(this,"response"),ue(this,"statusCode",400),ue(this,"responseBody"),ue(this,"details"),Object.assign(this,r)}}class sa extends Error{constructor(t){const r=jn(t);super(r.message),ue(this,"response"),ue(this,"statusCode",500),ue(this,"responseBody"),ue(this,"details"),Object.assign(this,r)}}function jn(e){const t=e.body,r={response:e,statusCode:e.statusCode,responseBody:ca(t,e),message:"",details:void 0};if(t.error&&t.message)return r.message=`${t.error} - ${t.message}`,r;if(ia(t)||oa(t)){const n=t.error.items||[],i=n.slice(0,5).map(o=>{var a;return(a=o.error)==null?void 0:a.description}).filter(Boolean);let s=i.length?`:
- ${i.join(`
- `)}`:"";return n.length>5&&(s+=`
...and ${n.length-5} more`),r.message=`${t.error.description}${s}`,r.details=t.error,r}return t.error&&t.error.description?(r.message=t.error.description,r.details=t.error,r):(r.message=t.error||t.message||aa(e),r)}function ia(e){return ft(e)&&ft(e.error)&&e.error.type==="mutationError"&&typeof e.error.description=="string"}function oa(e){return ft(e)&&ft(e.error)&&e.error.type==="actionError"&&typeof e.error.description=="string"}function ft(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function aa(e){const t=e.statusMessage?` ${e.statusMessage}`:"";return`${e.method}-request to ${e.url} resulted in HTTP ${e.statusCode}${t}`}function ca(e,t){return(t.headers["content-type"]||"").toLowerCase().indexOf("application/json")!==-1?JSON.stringify(e,null,2):e}const ua={onResponse:e=>{if(e.statusCode>=500)throw new sa(e);if(e.statusCode>=400)throw new na(e);return e}},la={onResponse:e=>{const t=e.headers["x-sanity-warning"];return(Array.isArray(t)?t:[t]).filter(Boolean).forEach(r=>console.warn(r)),e}};function fa(e){return Ni([nr({shouldRetry:ha}),...e,la,Gi(),Yi(),Zi(),ua,Xi({implementation:Y})])}function ha(e,t,r){if(r.maxRetries===0)return!1;const n=r.method==="GET"||r.method==="HEAD",i=(r.uri||r.url).startsWith("/data/query"),s=e.response&&(e.response.statusCode===429||e.response.statusCode===502||e.response.statusCode===503);return(n||i)&&s?!0:nr.shouldRetry(e,t,r)}function Fn(e){if(typeof e=="string")return{id:e};if(Array.isArray(e))return{query:"*[_id in $ids]",params:{ids:e}};if(typeof e=="object"&&e!==null&&"query"in e&&typeof e.query=="string")return"params"in e&&typeof e.params=="object"&&e.params!==null?{query:e.query,params:e.params}:{query:e.query};const t=["* Document ID (<docId>)","* Array of document IDs","* Object containing `query`"].join(`
`);throw new Error(`Unknown selection - must be one of:

${t}`)}const Gr=["image","file"],Yr=["before","after","replace"],Ln=e=>{if(!/^(~[a-z0-9]{1}[-\w]{0,63}|[a-z0-9]{1}[-\w]{0,63})$/.test(e))throw new Error("Datasets can only contain lowercase characters, numbers, underscores and dashes, and start with tilde, and be maximum 64 characters")},da=e=>{if(!/^[-a-z0-9]+$/i.test(e))throw new Error("`projectId` can only contain only a-z, 0-9 and dashes")},pa=e=>{if(Gr.indexOf(e)===-1)throw new Error(`Invalid asset type: ${e}. Must be one of ${Gr.join(", ")}`)},Ne=(e,t)=>{if(t===null||typeof t!="object"||Array.isArray(t))throw new Error(`${e}() takes an object of properties`)},qn=(e,t)=>{if(typeof t!="string"||!/^[a-z0-9_][a-z0-9_.-]{0,127}$/i.test(t)||t.includes(".."))throw new Error(`${e}(): "${t}" is not a valid document ID`)},ht=(e,t)=>{if(!t._id)throw new Error(`${e}() requires that the document contains an ID ("_id" property)`);qn(e,t._id)},ya=(e,t,r)=>{const n="insert(at, selector, items)";if(Yr.indexOf(e)===-1){const i=Yr.map(s=>`"${s}"`).join(", ");throw new Error(`${n} takes an "at"-argument which is one of: ${i}`)}if(typeof t!="string")throw new Error(`${n} takes a "selector"-argument which must be a string`);if(!Array.isArray(r))throw new Error(`${n} takes an "items"-argument which must be an array`)},Dn=e=>{if(!e.dataset)throw new Error("`dataset` must be provided to perform queries");return e.dataset||""},Un=e=>{if(typeof e!="string"||!/^[a-z0-9._-]{1,75}$/i.test(e))throw new Error("Tag can only contain alphanumeric characters, underscores, dashes and dots, and be between one and 75 characters long.");return e};var ga=Object.defineProperty,ma=(e,t,r)=>t in e?ga(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Qr=(e,t,r)=>(ma(e,typeof t!="symbol"?t+"":t,r),r),Nn=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},Te=(e,t,r)=>(Nn(e,t,"read from private field"),r?r.call(e):t.get(e)),zn=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},Kn=(e,t,r,n)=>(Nn(e,t,"write to private field"),t.set(e,r),r);class Wn{constructor(t,r={}){Qr(this,"selection"),Qr(this,"operations"),this.selection=t,this.operations=r}set(t){return this._assign("set",t)}setIfMissing(t){return this._assign("setIfMissing",t)}diffMatchPatch(t){return Ne("diffMatchPatch",t),this._assign("diffMatchPatch",t)}unset(t){if(!Array.isArray(t))throw new Error("unset(attrs) takes an array of attributes to unset, non-array given");return this.operations=Object.assign({},this.operations,{unset:t}),this}inc(t){return this._assign("inc",t)}dec(t){return this._assign("dec",t)}insert(t,r,n){return ya(t,r,n),this._assign("insert",{[t]:r,items:n})}append(t,r){return this.insert("after",`${t}[-1]`,r)}prepend(t,r){return this.insert("before",`${t}[0]`,r)}splice(t,r,n,i){const s=typeof n>"u"||n===-1,o=r<0?r-1:r,a=s?-1:Math.max(0,r+n),c=o<0&&a>=0?"":a,l=`${t}[${o}:${c}]`;return this.insert("replace",l,i||[])}ifRevisionId(t){return this.operations.ifRevisionID=t,this}serialize(){return{...Fn(this.selection),...this.operations}}toJSON(){return this.serialize()}reset(){return this.operations={},this}_assign(t,r,n=!0){return Ne(t,r),this.operations=Object.assign({},this.operations,{[t]:Object.assign({},n&&this.operations[t]||{},r)}),this}_set(t,r){return this._assign(t,r,!1)}}var Se;const va=class Hn extends Wn{constructor(t,r,n){super(t,r),zn(this,Se,void 0),Kn(this,Se,n)}clone(){return new Hn(this.selection,{...this.operations},Te(this,Se))}commit(t){if(!Te(this,Se))throw new Error("No `client` passed to patch, either provide one or pass the patch to a clients `mutate()` method");const r=typeof this.selection=="string",n=Object.assign({returnFirst:r,returnDocuments:!0},t);return Te(this,Se).mutate({patch:this.serialize()},n)}};Se=new WeakMap;let ze=va;var $e;const wa=class Bn extends Wn{constructor(t,r,n){super(t,r),zn(this,$e,void 0),Kn(this,$e,n)}clone(){return new Bn(this.selection,{...this.operations},Te(this,$e))}commit(t){if(!Te(this,$e))throw new Error("No `client` passed to patch, either provide one or pass the patch to a clients `mutate()` method");const r=typeof this.selection=="string",n=Object.assign({returnFirst:r,returnDocuments:!0},t);return Te(this,$e).mutate({patch:this.serialize()},n)}};$e=new WeakMap;let Ke=wa;var ba=Object.defineProperty,_a=(e,t,r)=>t in e?ba(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Xr=(e,t,r)=>(_a(e,typeof t!="symbol"?t+"":t,r),r),Vn=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},le=(e,t,r)=>(Vn(e,t,"read from private field"),r?r.call(e):t.get(e)),Jn=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},Gn=(e,t,r,n)=>(Vn(e,t,"write to private field"),t.set(e,r),r);const Yn={returnDocuments:!1};class Qn{constructor(t=[],r){Xr(this,"operations"),Xr(this,"trxId"),this.operations=t,this.trxId=r}create(t){return Ne("create",t),this._add({create:t})}createIfNotExists(t){const r="createIfNotExists";return Ne(r,t),ht(r,t),this._add({[r]:t})}createOrReplace(t){const r="createOrReplace";return Ne(r,t),ht(r,t),this._add({[r]:t})}delete(t){return qn("delete",t),this._add({delete:{id:t}})}transactionId(t){return t?(this.trxId=t,this):this.trxId}serialize(){return[...this.operations]}toJSON(){return this.serialize()}reset(){return this.operations=[],this}_add(t){return this.operations.push(t),this}}var de;const Ea=class Xn extends Qn{constructor(t,r,n){super(t,n),Jn(this,de,void 0),Gn(this,de,r)}clone(){return new Xn([...this.operations],le(this,de),this.trxId)}commit(t){if(!le(this,de))throw new Error("No `client` passed to transaction, either provide one or pass the transaction to a clients `mutate()` method");return le(this,de).mutate(this.serialize(),Object.assign({transactionId:this.trxId},Yn,t||{}))}patch(t,r){const n=typeof r=="function";if(typeof t!="string"&&t instanceof Ke)return this._add({patch:t.serialize()});if(n){const i=r(new Ke(t,{},le(this,de)));if(!(i instanceof Ke))throw new Error("function passed to `patch()` must return the patch");return this._add({patch:i.serialize()})}return this._add({patch:{id:t,...r}})}};de=new WeakMap;let Zn=Ea;var pe;const Sa=class es extends Qn{constructor(t,r,n){super(t,n),Jn(this,pe,void 0),Gn(this,pe,r)}clone(){return new es([...this.operations],le(this,pe),this.trxId)}commit(t){if(!le(this,pe))throw new Error("No `client` passed to transaction, either provide one or pass the transaction to a clients `mutate()` method");return le(this,pe).mutate(this.serialize(),Object.assign({transactionId:this.trxId},Yn,t||{}))}patch(t,r){const n=typeof r=="function";if(typeof t!="string"&&t instanceof ze)return this._add({patch:t.serialize()});if(n){const i=r(new ze(t,{},le(this,pe)));if(!(i instanceof ze))throw new Error("function passed to `patch()` must return the patch");return this._add({patch:i.serialize()})}return this._add({patch:{id:t,...r}})}};pe=new WeakMap;let ts=Sa;const $a="https://www.sanity.io/help/";function fr(e){return $a+e}function Ca(e){let t=!1,r;return(...n)=>(t||(r=e(...n),t=!0),r)}const Je=e=>Ca((...t)=>console.warn(e.join(" "),...t)),ka=Je(["Because you set `withCredentials` to true, we will override your `useCdn`","setting to be false since (cookie-based) credentials are never set on the CDN"]),Aa=Je(["Since you haven't set a value for `useCdn`, we will deliver content using our","global, edge-cached API-CDN. If you wish to have content delivered faster, set","`useCdn: false` to use the Live API. Note: You may incur higher costs using the live API."]),Oa=Je(["The Sanity client is configured with the `perspective` set to `previewDrafts`, which doesn't support the API-CDN.","The Live API will be used instead. Set `useCdn: false` in your configuration to hide this warning."]),Ta=Je(["You have configured Sanity client to use a token in the browser. This may cause unintentional security issues.",`See ${fr("js-client-browser-token")} for more information and how to hide this warning.`]),Ra=Je(["Using the Sanity client without specifying an API version is deprecated.",`See ${fr("js-client-api-version")}`]),Pa="apicdn.sanity.io",We={apiHost:"https://api.sanity.io",apiVersion:"1",useProjectHostname:!0,stega:{enabled:!1}},xa=["localhost","127.0.0.1","0.0.0.0"],Ma=e=>xa.indexOf(e)!==-1;function Ia(e){if(e==="1"||e==="X")return;const t=new Date(e);if(!(/^\d{4}-\d{2}-\d{2}$/.test(e)&&t instanceof Date&&t.getTime()>0))throw new Error("Invalid API version string, expected `1` or date in format `YYYY-MM-DD`")}const rs=function(e){switch(e){case"previewDrafts":case"published":case"raw":return;default:throw new TypeError("Invalid API perspective string, expected `published`, `previewDrafts` or `raw`")}},ns=(e,t)=>{const r={...t,...e,stega:{...typeof t.stega=="boolean"?{enabled:t.stega}:t.stega||We.stega,...typeof e.stega=="boolean"?{enabled:e.stega}:e.stega||{}}};r.apiVersion||Ra();const n={...We,...r},i=n.useProjectHostname;if(typeof Promise>"u"){const f=fr("js-client-promise-polyfill");throw new Error(`No native Promise-implementation found, polyfill needed - see ${f}`)}if(i&&!n.projectId)throw new Error("Configuration must contain `projectId`");if(typeof n.perspective=="string"&&rs(n.perspective),"encodeSourceMap"in n)throw new Error("It looks like you're using options meant for '@sanity/preview-kit/client'. 'encodeSourceMap' is not supported in '@sanity/client'. Did you mean 'stega.enabled'?");if("encodeSourceMapAtPath"in n)throw new Error("It looks like you're using options meant for '@sanity/preview-kit/client'. 'encodeSourceMapAtPath' is not supported in '@sanity/client'. Did you mean 'stega.filter'?");if(typeof n.stega.enabled!="boolean")throw new Error(`stega.enabled must be a boolean, received ${n.stega.enabled}`);if(n.stega.enabled&&n.stega.studioUrl===void 0)throw new Error("stega.studioUrl must be defined when stega.enabled is true");if(n.stega.enabled&&typeof n.stega.studioUrl!="string"&&typeof n.stega.studioUrl!="function")throw new Error(`stega.studioUrl must be a string or a function, received ${n.stega.studioUrl}`);const s=typeof window<"u"&&window.location&&window.location.hostname,o=s&&Ma(window.location.hostname);s&&o&&n.token&&n.ignoreBrowserTokenWarning!==!0?Ta():typeof n.useCdn>"u"&&Aa(),i&&da(n.projectId),n.dataset&&Ln(n.dataset),"requestTagPrefix"in n&&(n.requestTagPrefix=n.requestTagPrefix?Un(n.requestTagPrefix).replace(/\.+$/,""):void 0),n.apiVersion=`${n.apiVersion}`.replace(/^v/,""),n.isDefaultApi=n.apiHost===We.apiHost,n.useCdn===!0&&n.withCredentials&&ka(),n.useCdn=n.useCdn!==!1&&!n.withCredentials,Ia(n.apiVersion);const a=n.apiHost.split("://",2),c=a[0],l=a[1],u=n.isDefaultApi?Pa:l;return n.useProjectHostname?(n.url=`${c}://${n.projectId}.${l}/v${n.apiVersion}`,n.cdnUrl=`${c}://${n.projectId}.${u}/v${n.apiVersion}`):(n.url=`${n.apiHost}/v${n.apiVersion}`,n.cdnUrl=n.url),n},ja="X-Sanity-Project-ID";function Fa(e,t={}){const r={},n=t.token||e.token;n&&(r.Authorization=`Bearer ${n}`),!t.useGlobalApi&&!e.useProjectHostname&&e.projectId&&(r[ja]=e.projectId);const i=!!(typeof t.withCredentials>"u"?e.token||e.withCredentials:t.withCredentials),s=typeof t.timeout>"u"?e.timeout:t.timeout;return Object.assign({},t,{headers:Object.assign({},r,t.headers||{}),timeout:typeof s>"u"?5*60*1e3:s,proxy:t.proxy||e.proxy,json:!0,withCredentials:i,fetch:typeof t.fetch=="object"&&typeof e.fetch=="object"?{...e.fetch,...t.fetch}:t.fetch||e.fetch})}const ss=({query:e,params:t={},options:r={}})=>{const n=new URLSearchParams,{tag:i,includeMutations:s,returnQuery:o,...a}=r;i&&n.append("tag",i),n.append("query",e);for(const[c,l]of Object.entries(t))n.append(`$${c}`,JSON.stringify(l));for(const[c,l]of Object.entries(a))l&&n.append(c,`${l}`);return o===!1&&n.append("returnQuery","false"),s===!1&&n.append("includeMutations","false"),`?${n}`},La=(e,t)=>e===!1?void 0:typeof e>"u"?t:e,qa=(e={})=>({dryRun:e.dryRun,returnIds:!0,returnDocuments:La(e.returnDocuments,!0),visibility:e.visibility||"sync",autoGenerateArrayKeys:e.autoGenerateArrayKeys,skipCrossDatasetReferenceValidation:e.skipCrossDatasetReferenceValidation}),hr=e=>e.type==="response",Da=e=>e.body,Ua=(e,t)=>e.reduce((r,n)=>(r[t(n)]=n,r),Object.create(null)),Na=11264;function is(e,t,r,n,i={},s={}){const o="stega"in s?{...r||{},...typeof s.stega=="boolean"?{enabled:s.stega}:s.stega||{}}:r,a=o.enabled?ea(i):i,c=s.filterResponse===!1?h=>h:h=>h.result,{cache:l,next:u,...f}={useAbortSignal:typeof s.signal<"u",resultSourceMap:o.enabled?"withKeyArraySelector":s.resultSourceMap,...s,returnQuery:s.filterResponse===!1&&s.returnQuery!==!1},d=typeof l<"u"||typeof u<"u"?{...f,fetch:{cache:l,next:u}}:f,p=Pe(e,t,"query",{query:n,params:a},d);return o.enabled?p.pipe(Bo(xn(Ct(()=>import("./stegaEncodeSourceMap.Dkj4zhN2.js"),[],import.meta.url).then(function(h){return h.stegaEncodeSourceMap$1}).then(({stegaEncodeSourceMap:h})=>h))),ne(([h,y])=>{const m=y(h.result,h.resultSourceMap,o);return c({...h,result:m})})):p.pipe(ne(c))}function os(e,t,r,n={}){const i={uri:_e(e,"doc",r),json:!0,tag:n.tag};return Ge(e,t,i).pipe(Ve(hr),ne(s=>s.body.documents&&s.body.documents[0]))}function as(e,t,r,n={}){const i={uri:_e(e,"doc",r.join(",")),json:!0,tag:n.tag};return Ge(e,t,i).pipe(Ve(hr),ne(s=>{const o=Ua(s.body.documents||[],a=>a._id);return r.map(a=>o[a]||null)}))}function cs(e,t,r,n){return ht("createIfNotExists",r),Pt(e,t,r,"createIfNotExists",n)}function us(e,t,r,n){return ht("createOrReplace",r),Pt(e,t,r,"createOrReplace",n)}function ls(e,t,r,n){return Pe(e,t,"mutate",{mutations:[{delete:Fn(r)}]},n)}function fs(e,t,r,n){let i;r instanceof Ke||r instanceof ze?i={patch:r.serialize()}:r instanceof Zn||r instanceof ts?i=r.serialize():i=r;const s=Array.isArray(i)?i:[i],o=n&&n.transactionId||void 0;return Pe(e,t,"mutate",{mutations:s,transactionId:o},n)}function hs(e,t,r,n){const i=Array.isArray(r)?r:[r],s=n&&n.transactionId||void 0,o=n&&n.skipCrossDatasetReferenceValidation||void 0,a=n&&n.dryRun||void 0;return Pe(e,t,"actions",{actions:i,transactionId:s,skipCrossDatasetReferenceValidation:o,dryRun:a},n)}function Pe(e,t,r,n,i={}){const s=r==="mutate",o=r==="actions",a=r==="query",c=s||o?"":ss(n),l=!s&&!o&&c.length<Na,u=l?c:"",f=i.returnFirst,{timeout:d,token:p,tag:h,headers:y,returnQuery:m,lastLiveEventId:v}=i,k=_e(e,r,u),S={method:l?"GET":"POST",uri:k,json:!0,body:l?void 0:n,query:s&&qa(i),timeout:d,headers:y,token:p,tag:h,returnQuery:m,perspective:i.perspective,resultSourceMap:i.resultSourceMap,lastLiveEventId:Array.isArray(v)?v[0]:v,canUseCdn:a,signal:i.signal,fetch:i.fetch,useAbortSignal:i.useAbortSignal,useCdn:i.useCdn};return Ge(e,t,S).pipe(Ve(hr),ne(Da),ne(w=>{if(!s)return w;const _=w.results||[];if(i.returnDocuments)return f?_[0]&&_[0].document:_.map(x=>x.document);const A=f?"documentId":"documentIds",$=f?_[0]&&_[0].id:_.map(x=>x.id);return{transactionId:w.transactionId,results:_,[A]:$}}))}function Pt(e,t,r,n,i={}){const s={[n]:r},o=Object.assign({returnFirst:!0,returnDocuments:!0},i);return Pe(e,t,"mutate",{mutations:[s]},o)}function Ge(e,t,r){var n,i;const s=r.url||r.uri,o=e.config(),a=typeof r.canUseCdn>"u"?["GET","HEAD"].indexOf(r.method||"GET")>=0&&s.indexOf("/data/")===0:r.canUseCdn;let c=((n=r.useCdn)!=null?n:o.useCdn)&&a;const l=r.tag&&o.requestTagPrefix?[o.requestTagPrefix,r.tag].join("."):r.tag||o.requestTagPrefix;if(l&&r.tag!==null&&(r.query={tag:Un(l),...r.query}),["GET","HEAD","POST"].indexOf(r.method||"GET")>=0&&s.indexOf("/data/query/")===0){const d=(i=r.resultSourceMap)!=null?i:o.resultSourceMap;d!==void 0&&d!==!1&&(r.query={resultSourceMap:d,...r.query});const p=r.perspective||o.perspective;typeof p=="string"&&p!=="raw"&&(rs(p),r.query={perspective:p,...r.query},p==="previewDrafts"&&c&&(c=!1,Oa())),r.lastLiveEventId&&(r.query={...r.query,lastLiveEventId:r.lastLiveEventId}),r.returnQuery===!1&&(r.query={returnQuery:"false",...r.query})}const u=Fa(o,Object.assign({},r,{url:dr(e,s,c)})),f=new Y(d=>t(u,o.requester).subscribe(d));return r.signal?f.pipe(za(r.signal)):f}function Z(e,t,r){return Ge(e,t,r).pipe(Ve(n=>n.type==="response"),ne(n=>n.body))}function _e(e,t,r){const n=e.config(),i=Dn(n),s=`/${t}/${i}`;return`/data${r?`${s}/${r}`:s}`.replace(/\/($|\?)/,"$1")}function dr(e,t,r=!1){const{url:n,cdnUrl:i}=e.config();return`${r?i:n}/${t.replace(/^\//,"")}`}function za(e){return t=>new Y(r=>{const n=()=>r.error(Wa(e));if(e&&e.aborted){n();return}const i=t.subscribe(r);return e.addEventListener("abort",n),()=>{e.removeEventListener("abort",n),i.unsubscribe()}})}const Ka=!!globalThis.DOMException;function Wa(e){var t,r;if(Ka)return new DOMException((t=e==null?void 0:e.reason)!=null?t:"The operation was aborted.","AbortError");const n=new Error((r=e==null?void 0:e.reason)!=null?r:"The operation was aborted.");return n.name="AbortError",n}var ds=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},dt=(e,t,r)=>(ds(e,t,"read from private field"),r?r.call(e):t.get(e)),pt=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},yt=(e,t,r,n)=>(ds(e,t,"write to private field"),t.set(e,r),r),nt,st;class Ha{constructor(t,r){pt(this,nt,void 0),pt(this,st,void 0),yt(this,nt,t),yt(this,st,r)}upload(t,r,n){return ps(dt(this,nt),dt(this,st),t,r,n)}}nt=new WeakMap,st=new WeakMap;var it,ot;class Ba{constructor(t,r){pt(this,it,void 0),pt(this,ot,void 0),yt(this,it,t),yt(this,ot,r)}upload(t,r,n){const i=ps(dt(this,it),dt(this,ot),t,r,n);return N(i.pipe(Ve(s=>s.type==="response"),ne(s=>s.body.document)))}}it=new WeakMap,ot=new WeakMap;function ps(e,t,r,n,i={}){pa(r);let s=i.extract||void 0;s&&!s.length&&(s=["none"]);const o=Dn(e.config()),a=r==="image"?"images":"files",c=Va(i,n),{tag:l,label:u,title:f,description:d,creditLine:p,filename:h,source:y}=c,m={label:u,title:f,description:d,filename:h,meta:s,creditLine:p};return y&&(m.sourceId=y.id,m.sourceName=y.name,m.sourceUrl=y.url),Ge(e,t,{tag:l,method:"POST",timeout:c.timeout||0,uri:`/assets/${a}/${o}`,headers:c.contentType?{"Content-Type":c.contentType}:{},query:m,body:n})}function Va(e,t){return typeof File>"u"||!(t instanceof File)?e:Object.assign({filename:e.preserveFilename===!1?void 0:t.name,contentType:t.type},e)}var Ja=(e,t)=>Object.keys(t).concat(Object.keys(e)).reduce((r,n)=>(r[n]=typeof e[n]>"u"?t[n]:e[n],r),{});const Ga=(e,t)=>t.reduce((r,n)=>(typeof e[n]>"u"||(r[n]=e[n]),r),{}),Ya=14800,Qa=["includePreviousRevision","includeResult","includeMutations","visibility","effectFormat","tag"],Xa={includeResult:!0};function ys(e,t,r={}){const{url:n,token:i,withCredentials:s,requestTagPrefix:o}=this.config(),a=r.tag&&o?[o,r.tag].join("."):r.tag,c={...Ja(r,Xa),tag:a},l=Ga(c,Qa),u=ss({query:e,params:t,options:{tag:a,...l}}),f=`${n}${_e(this,"listen",u)}`;if(f.length>Ya)return new Y(y=>y.error(new Error("Query too large for listener")));const d=c.events?c.events:["mutation"],p=d.indexOf("reconnect")!==-1,h={};return(i||s)&&(h.withCredentials=!0),i&&(h.headers={Authorization:`Bearer ${i}`}),new Y(y=>{let m,v,k=!1,S=!1;b();function w(){k||(T(),!k&&m.readyState===m.CLOSED&&(x(),clearTimeout(v),v=setTimeout(b,100)))}function _(E){y.error(Za(E))}function A(E){const R=gs(E);return R instanceof Error?y.error(R):y.next(R)}function $(){k=!0,x(),y.complete()}function x(){m&&(m.removeEventListener("error",w),m.removeEventListener("channelError",_),m.removeEventListener("disconnect",$),d.forEach(E=>m.removeEventListener(E,A)),m.close())}function T(){p&&y.next({type:"reconnect"})}async function g(){const{default:E}=await Ct(async()=>{const{default:C}=await import("./browser.CN6lQcF5.js").then(M=>M.b);return{default:C}},[],import.meta.url);if(S)return;const R=new E(f,h);return R.addEventListener("error",w),R.addEventListener("channelError",_),R.addEventListener("disconnect",$),d.forEach(C=>R.addEventListener(C,A)),R}function b(){g().then(E=>{E&&(m=E,S&&x())}).catch(E=>{y.error(E),O()})}function O(){k=!0,x(),S=!0}return O})}function gs(e){try{const t=e.data&&JSON.parse(e.data)||{};return Object.assign({type:e.type},t)}catch(t){return t}}function Za(e){if(e instanceof Error)return e;const t=gs(e);return t instanceof Error?t:new Error(ec(t))}function ec(e){return e.error?e.error.description?e.error.description:typeof e.error=="string"?e.error:JSON.stringify(e.error,null,2):e.message||"Unknown listener error"}var ms=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},Ut=(e,t,r)=>(ms(e,t,"read from private field"),r?r.call(e):t.get(e)),tc=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},rc=(e,t,r,n)=>(ms(e,t,"write to private field"),t.set(e,r),r);const Zr="2021-03-26";var Ce;class vs{constructor(t){tc(this,Ce,void 0),rc(this,Ce,t)}events(){const t=Ut(this,Ce).config().apiVersion.replace(/^v/,"");if(t!=="X"&&t<Zr)throw new Error(`The live events API requires API version ${Zr} or later. The current API version is ${t}. Please update your API version to use this feature.`);const r=_e(Ut(this,Ce),"live/events"),n=new URL(Ut(this,Ce).getUrl(r,!1)),i=["restart","message"];return new Y(s=>{let o,a,c=!1,l=!1;h();function u(m){if(!c){if("data"in m){const v=en(m);s.error(new Error(v.message,{cause:v}))}o.readyState===o.CLOSED&&(d(),clearTimeout(a),a=setTimeout(h,100))}}function f(m){const v=en(m);return v instanceof Error?s.error(v):s.next(v)}function d(){if(o){o.removeEventListener("error",u);for(const m of i)o.removeEventListener(m,f);o.close()}}async function p(){const m=typeof EventSource>"u"?(await Ct(async()=>{const{default:k}=await import("./browser.CN6lQcF5.js").then(S=>S.b);return{default:k}},[],import.meta.url)).default:EventSource;if(l)return;const v=new m(n.toString());v.addEventListener("error",u);for(const k of i)v.addEventListener(k,f);return v}function h(){p().then(m=>{m&&(o=m,l&&d())}).catch(m=>{s.error(m),y()})}function y(){c=!0,d(),l=!0}return y})}}Ce=new WeakMap;function en(e){try{const t=e.data&&JSON.parse(e.data)||{};return{type:e.type,id:e.lastEventId,...t}}catch(t){return t}}var ws=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},H=(e,t,r)=>(ws(e,t,"read from private field"),r?r.call(e):t.get(e)),gt=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},mt=(e,t,r,n)=>(ws(e,t,"write to private field"),t.set(e,r),r),ye,ge;class nc{constructor(t,r){gt(this,ye,void 0),gt(this,ge,void 0),mt(this,ye,t),mt(this,ge,r)}create(t,r){return Re(H(this,ye),H(this,ge),"PUT",t,r)}edit(t,r){return Re(H(this,ye),H(this,ge),"PATCH",t,r)}delete(t){return Re(H(this,ye),H(this,ge),"DELETE",t)}list(){return Z(H(this,ye),H(this,ge),{uri:"/datasets",tag:null})}}ye=new WeakMap,ge=new WeakMap;var me,ve;class sc{constructor(t,r){gt(this,me,void 0),gt(this,ve,void 0),mt(this,me,t),mt(this,ve,r)}create(t,r){return N(Re(H(this,me),H(this,ve),"PUT",t,r))}edit(t,r){return N(Re(H(this,me),H(this,ve),"PATCH",t,r))}delete(t){return N(Re(H(this,me),H(this,ve),"DELETE",t))}list(){return N(Z(H(this,me),H(this,ve),{uri:"/datasets",tag:null}))}}me=new WeakMap,ve=new WeakMap;function Re(e,t,r,n,i){return Ln(n),Z(e,t,{method:r,uri:`/datasets/${n}`,body:i,tag:null})}var bs=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},fe=(e,t,r)=>(bs(e,t,"read from private field"),r?r.call(e):t.get(e)),vt=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},wt=(e,t,r,n)=>(bs(e,t,"write to private field"),t.set(e,r),r),Le,qe;class ic{constructor(t,r){vt(this,Le,void 0),vt(this,qe,void 0),wt(this,Le,t),wt(this,qe,r)}list(t){const r=(t==null?void 0:t.includeMembers)===!1?"/projects?includeMembers=false":"/projects";return Z(fe(this,Le),fe(this,qe),{uri:r})}getById(t){return Z(fe(this,Le),fe(this,qe),{uri:`/projects/${t}`})}}Le=new WeakMap,qe=new WeakMap;var De,Ue;class oc{constructor(t,r){vt(this,De,void 0),vt(this,Ue,void 0),wt(this,De,t),wt(this,Ue,r)}list(t){const r=(t==null?void 0:t.includeMembers)===!1?"/projects?includeMembers=false":"/projects";return N(Z(fe(this,De),fe(this,Ue),{uri:r}))}getById(t){return N(Z(fe(this,De),fe(this,Ue),{uri:`/projects/${t}`}))}}De=new WeakMap,Ue=new WeakMap;var _s=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},bt=(e,t,r)=>(_s(e,t,"read from private field"),r?r.call(e):t.get(e)),_t=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},Et=(e,t,r,n)=>(_s(e,t,"write to private field"),t.set(e,r),r),at,ct;class ac{constructor(t,r){_t(this,at,void 0),_t(this,ct,void 0),Et(this,at,t),Et(this,ct,r)}getById(t){return Z(bt(this,at),bt(this,ct),{uri:`/users/${t}`})}}at=new WeakMap,ct=new WeakMap;var ut,lt;class cc{constructor(t,r){_t(this,ut,void 0),_t(this,lt,void 0),Et(this,ut,t),Et(this,lt,r)}getById(t){return N(Z(bt(this,ut),bt(this,lt),{uri:`/users/${t}`}))}}ut=new WeakMap,lt=new WeakMap;var uc=Object.defineProperty,lc=(e,t,r)=>t in e?uc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,V=(e,t,r)=>(lc(e,typeof t!="symbol"?t+"":t,r),r),Es=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},P=(e,t,r)=>(Es(e,t,"read from private field"),r?r.call(e):t.get(e)),St=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},$t=(e,t,r,n)=>(Es(e,t,"write to private field"),t.set(e,r),r),ae,U;const fc=class Gt{constructor(t,r=We){V(this,"assets"),V(this,"datasets"),V(this,"live"),V(this,"projects"),V(this,"users"),St(this,ae,void 0),St(this,U,void 0),V(this,"listen",ys),this.config(r),$t(this,U,t),this.assets=new Ha(this,P(this,U)),this.datasets=new nc(this,P(this,U)),this.live=new vs(this),this.projects=new ic(this,P(this,U)),this.users=new ac(this,P(this,U))}clone(){return new Gt(P(this,U),this.config())}config(t){if(t===void 0)return{...P(this,ae)};if(P(this,ae)&&P(this,ae).allowReconfigure===!1)throw new Error("Existing client instance cannot be reconfigured - use `withConfig(newConfig)` to return a new client");return $t(this,ae,ns(t,P(this,ae)||{})),this}withConfig(t){const r=this.config();return new Gt(P(this,U),{...r,...t,stega:{...r.stega||{},...typeof(t==null?void 0:t.stega)=="boolean"?{enabled:t.stega}:(t==null?void 0:t.stega)||{}}})}fetch(t,r,n){return is(this,P(this,U),P(this,ae).stega,t,r,n)}getDocument(t,r){return os(this,P(this,U),t,r)}getDocuments(t,r){return as(this,P(this,U),t,r)}create(t,r){return Pt(this,P(this,U),t,"create",r)}createIfNotExists(t,r){return cs(this,P(this,U),t,r)}createOrReplace(t,r){return us(this,P(this,U),t,r)}delete(t,r){return ls(this,P(this,U),t,r)}mutate(t,r){return fs(this,P(this,U),t,r)}patch(t,r){return new ze(t,r,this)}transaction(t){return new ts(t,this)}action(t,r){return hs(this,P(this,U),t,r)}request(t){return Z(this,P(this,U),t)}getUrl(t,r){return dr(this,t,r)}getDataUrl(t,r){return _e(this,t,r)}};ae=new WeakMap,U=new WeakMap;let hc=fc;var ce,D;const dc=class Yt{constructor(t,r=We){V(this,"assets"),V(this,"datasets"),V(this,"live"),V(this,"projects"),V(this,"users"),V(this,"observable"),St(this,ce,void 0),St(this,D,void 0),V(this,"listen",ys),this.config(r),$t(this,D,t),this.assets=new Ba(this,P(this,D)),this.datasets=new sc(this,P(this,D)),this.live=new vs(this),this.projects=new oc(this,P(this,D)),this.users=new cc(this,P(this,D)),this.observable=new hc(t,r)}clone(){return new Yt(P(this,D),this.config())}config(t){if(t===void 0)return{...P(this,ce)};if(P(this,ce)&&P(this,ce).allowReconfigure===!1)throw new Error("Existing client instance cannot be reconfigured - use `withConfig(newConfig)` to return a new client");return this.observable&&this.observable.config(t),$t(this,ce,ns(t,P(this,ce)||{})),this}withConfig(t){const r=this.config();return new Yt(P(this,D),{...r,...t,stega:{...r.stega||{},...typeof(t==null?void 0:t.stega)=="boolean"?{enabled:t.stega}:(t==null?void 0:t.stega)||{}}})}fetch(t,r,n){return N(is(this,P(this,D),P(this,ce).stega,t,r,n))}getDocument(t,r){return N(os(this,P(this,D),t,r))}getDocuments(t,r){return N(as(this,P(this,D),t,r))}create(t,r){return N(Pt(this,P(this,D),t,"create",r))}createIfNotExists(t,r){return N(cs(this,P(this,D),t,r))}createOrReplace(t,r){return N(us(this,P(this,D),t,r))}delete(t,r){return N(ls(this,P(this,D),t,r))}mutate(t,r){return N(fs(this,P(this,D),t,r))}patch(t,r){return new Ke(t,r,this)}transaction(t){return new Zn(t,this)}action(t,r){return N(hs(this,P(this,D),t,r))}request(t){return N(Z(this,P(this,D),t))}dataRequest(t,r,n){return N(Pe(this,P(this,D),t,r,n))}getUrl(t,r){return dr(this,t,r)}getDataUrl(t,r){return _e(this,t,r)}};ce=new WeakMap,D=new WeakMap;let pc=dc;function yc(e,t){const r=fa(e);return{requester:r,createClient:n=>new t((i,s)=>(s||r)({maxRedirects:0,maxRetries:n.maxRetries,retryDelay:n.retryDelay,...i}),n)}}var gc=[];const mc=yc(gc,pc),vc=mc.createClient,wc="4gz7oym3",bc="production",_c="https://freiraum-studio.vercel.app/studio/";function Ss(e,t){if(e===void 0)throw new Error(`Missing environment variable: ${t}`);return e}const Ec=Ss(bc,"PUBLIC_SANITY_DATASET"),Sc=Ss(wc,"PUBLIC_SANITY_PROJECT_ID"),$c="2024-03-15",Cc=_c,Kc=vc({projectId:Sc,dataset:Ec,apiVersion:$c,useCdn:!1,token:"sksUPagry14vJfjOkbBr8QACt4HFNaQh5HBlGDjgBedIlc2yR1bW169QTZ6p2AfAGoRrduwVOPdbEbmCp3UGOfRy6ns6vgoXSwIVRers84zHoPto92b12DA1T9CIzFfXCFMi7DyCBVmzOsYc55exuauL4fD1wKErbHDPS7GpdDkU6GskBJng",apiHost:"https://api.sanity.io",stega:{studioUrl:Cc}});export{zc as C,pc as S,Kc as a,Ic as b,Fc as c,Pc as d,Rc as e,jr as f,yi as g,Dc as h,xc as o,er as s,Mc as u,Uc as y};
